This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: .claude/rules/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.claude/
  rules/
    00-core/
      anti-dilution.md
      antigravity-ide.md
      auto-accept-mode.md
      bridge-sync.md
      daily-check.md
      data-diet.md
      nuclear-weaponization.md
      quota-optimization.md
      revenue-model.md
      win-win-win-gate.md
    01-strategy/
      13-chapters/
        01-ke-hoach.md
        02-tac-chien.md
        03-muu-cong.md
        04-hinh-the.md
        05-the-tran.md
        06-hu-thuc.md
        07-quan-tranh.md
        08-cuu-bien.md
        09-hanh-quan.md
        10-dia-hinh.md
        11-cuu-dia.md
        12-hoa-cong.md
        13-dung-gian.md
      tactical-patterns/
        pattern-01-trinity-lock.md
        pattern-02-nuclear-conversion.md
        pattern-03-five-factor-audit.md
        pattern-04-anti-dilution-shield.md
        pattern-05-auto-accept-velocity.md
        pattern-06-data-diet.md
        pattern-07-bridge-sync.md
        pattern-08-daily-alignment.md
        pattern-09-revenue-tiering.md
        pattern-10-agent-delegation.md
    02-development/
      python/
        fastapi-routes.md
        py-classes.md
        py-docstrings.md
        py-exceptions.md
        py-functions.md
        py-modules.md
        py-naming.md
        py-typing.md
        pydantic-models.md
        sqlalchemy-models.md
      testing/
        e2e-testing.md
        integration-testing.md
        mocking.md
        test-coverage.md
        unit-testing.md
      typescript/
        api-client.md
        react-components.md
        react-hooks.md
        react-props.md
        state-management.md
        ts-async.md
        ts-error-handling.md
        ts-interfaces.md
        ts-naming.md
        ts-types.md
    03-operations/
      ci-cd/
        artifact-management.md
        build-pipeline.md
        docker-build.md
        environment-vars.md
        github-actions.md
        linting-ci.md
        pr-checks.md
        release-flow.md
        security-scan.md
        versioning.md
      deployment/
        blue-green.md
        canary.md
        db-migrations.md
        deploy-prod.md
        deploy-staging.md
        infrastructure-code.md
        rollback.md
        secrets-management.md
      monitoring/
        alerting.md
        audit-logs.md
        error-tracking.md
        logging.md
        performance-metrics.md
        resource-usage.md
        uptime-monitoring.md
    binh-phap-strategy.md
    development-rules.md
    documentation-management.md
    m3-strict.md
    primary-workflow.md
    vibe-development-rules.md
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".claude/rules/00-core/anti-dilution.md">
# Anti-Dilution Shield Rules

> **Báº£o vá»‡ lá»£i Ã­ch Founder & Agency - "Giá»¯ Ä‘áº¥t giá»¯ thÃ nh"**

## Term Sheet Red Flags
Khi review term sheet cho startup, kiá»ƒm tra cÃ¡c Ä‘iá»u khoáº£n sau:

| Term | Acceptable | âš ï¸ Negotiate | âŒ WALK AWAY |
|------|------------|--------------|--------------|
| **Liquidation Pref** | 1x non-participating | - | 2x+ or participating |
| **Anti-dilution** | Broad-based weighted | - | Full ratchet |
| **Board Control** | Founder majority | Investor majority | - |
| **Vesting** | Standard 4-year cliff | Founder reset | Accelerated reset |
| **Pay-to-play** | None/Mild | Aggressive | - |

## Agency Protection
- **Equity**: Common stock or Options aligned with Founders
- **Dilution**: Pro-rata rights if possible (rare for service, standard for venture studio)
- **Exit**: Tag-along rights
</file>

<file path=".claude/rules/00-core/antigravity-ide.md">
# Antigravity IDE Subagents

> **Há»‡ Ä‘iá»u hÃ nh Agency OS - 100 Files, 22 Hubs**

## Structure
```
.agent/subagents/
â”œâ”€â”€ hubs/        # 18 hubs (binh-phap, vc, sales...)
â”œâ”€â”€ core/        # 5 core (win3-checker, vibe-tuner...)
â”œâ”€â”€ ops/         # 34 ops (sdrops, aeops, seoops...)
â”œâ”€â”€ mekongAgent/ # 42 agents (python-pro, nextjs...)
â””â”€â”€ README.md
```

## Key Agents
| Agent | Role | Invoke When |
|-------|------|-------------|
| `binh-phap-hub` | Grand Strategist | Strategy, WIN-WIN-WIN checks |
| `win3-checker` | Gatekeeper | Validating deals & decisions |
| `vc-hub` | Capitalist | Fundraising, Term sheets |
| `vibe-tuner` | Brand Voice | Voice, Tone, Personality |

## Activation
- **MekongAgent Compatible**: Works with existing Mekong architecture
- **Auto-Invoke**: Agents are called automatically based on context
</file>

<file path=".claude/rules/00-core/auto-accept-mode.md">
# Auto-Accept Mode

> **QUAN TRá»ŒNG: Máº·c Ä‘á»‹nh Báº¬T - Agent tá»± Ä‘á»™ng cháº¡y lá»‡nh khÃ´ng há»i**

## Allowed Commands (Auto-Accept)
| Loáº¡i lá»‡nh | Examples |
|-----------|----------|
| **Scripts** | `python3`, `node` scripts |
| **Read/View** | `ls`, `cat`, `head`, `tail`, `grep`, File read |
| **Git Read** | `git status`, `git log`, `git diff` |
| **Testing** | `pytest`, `npm test` |
| **Build** | `npm run build` |
| **System** | LaunchAgent reload |

## Restricted Commands (Must Ask)
| Loáº¡i lá»‡nh | Examples |
|-----------|----------|
| **Destructive** | `rm`, `delete`, `rm -rf` |
| **Git Write** | `git push`, `git commit` |
| **Deployment** | Deploy to production |
| **Install** | `brew install`, System packages |

## User Control
User can disable by saying:
- "Táº¯t auto-accept Ä‘i em"
- "Há»i trÆ°á»›c khi cháº¡y lá»‡nh"
- "Stop auto mode"
</file>

<file path=".claude/rules/00-core/bridge-sync.md">
# Bridge Sync Rules

> **"Äá»“ng bá»™ lÃ  sá»©c máº¡nh" - AntigravityKit Integration**

## 1. Sync Principles
- **Always Map**: Má»i phÃ¡t triá»ƒn pháº£i Ã¡nh xáº¡ vá»›i AntigravityKit modules.
- **Core First**: Sá»­ dá»¥ng DNA, Magnet, Revenue engine gá»‘c.
- **Unified**: AgencyOS vÃ  AgencyEr dÃ¹ng chung commands.

## 2. Sync Schedule
| Frequency | Action |
|-----------|--------|
| **Daily** | Check for updates |
| **Weekly** | Full module sync (Sunday 00:00 UTC) |
| **Release** | Immediate sync on new tag |
| **Manual** | `/antigravity-sync` command |

## 3. Bridge Status Check
Check parity between Claude (24 agents) and Gemini (105 agents).
- **Missing in Gemini**: Identify gaps (e.g., content-factory, git-manager).
- **Goal**: Full parity or strategic delegation.

## 4. Automation
- `on_trigger`: new_release, weekly_cron
- `sync_targets`: mekong-cli-new, agency-cli, agencyos-starter
</file>

<file path=".claude/rules/00-core/daily-check.md">
# Daily Check Rules

> **"Nháº­t tu" - Tá»± kiá»ƒm tra má»—i ngÃ y**

## Checklist
TrÆ°á»›c khi káº¿t thÃºc má»—i ngÃ y lÃ m viá»‡c (Session End), thá»±c hiá»‡n kiá»ƒm tra:

```
â–¡ HÃ´m nay Anh (Owner) WIN gÃ¬? (Portfolio, Cash, Legacy)
â–¡ HÃ´m nay Agency WIN gÃ¬? (Deal, Knowledge, Infra)
â–¡ HÃ´m nay Startup/Client WIN gÃ¬? (Protection, Strategy, Network)
â–¡ KhÃ´ng cÃ³ ai LOSE?
â–¡ Binh PhÃ¡p applied? (ÄÃ£ Ã¡p dá»¥ng mÆ°u lÆ°á»£c chÆ°a?)
```

## Definition of Winning
- **Anh WIN**: Equity value growth, Cash flow, Strategic position.
- **Agency WIN**: New capability, Reusable asset, Reputation.
- **Startup WIN**: Survival, Growth, Moat, Fundraising.

**ALL WIN = SHARED EXIT SUCCESS ğŸ†**
</file>

<file path=".claude/rules/00-core/data-diet.md">
# Data Diet Rules

> **Báº£o máº­t tuyá»‡t Ä‘á»‘i - "Cáº©n táº¯c vÃ´ Æ°u"**

## 1. Absolute Prohibitions (Cáº¥m tuyá»‡t Ä‘á»‘i)

### KHÃ”NG BAO GIá»œ Ä‘á»c/log:
- `.env` files
- API keys (AWS, Stripe, OpenAI, etc.)
- Credentials (DB passwords, SSH keys)
- User Personal Identifiable Information (PII)

### KHÃ”NG BAO GIá»œ commit:
- Passwords
- Private keys
- `.env` files (Use `.env.example` instead)
- Secrets in git history

### KHÃ”NG BAO GIá»œ share:
- Startup financials without permission
- VC intelligence without anonymizing
- Client proprietary strategies

## 2. Privacy Hook Compliance
- Respect `privacy-block.cjs`
- If blocked, ask user for permission using `AskUserQuestion`
- Default to "NO" if unsure

## 3. Data Handling
- Use Mock Data for testing
- Sanitize logs before outputting
- Local-first processing whenever possible
</file>

<file path=".claude/rules/00-core/nuclear-weaponization.md">
# Nuclear Weaponization Rule

> **"Má»i thá»© Anh Ä‘Æ°a â†’ Antigravity biáº¿n thÃ nh VÅ¨ KHÃ Háº T NHÃ‚N"**

## Protocol
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INPUT tá»« Anh              â†’  OUTPUT tá»« Antigravity         â”‚
â”‚  (Simple)                  â†’  (Weaponized)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  External tool (n8n)       â†’  Antigravity-native engine     â”‚
â”‚  Simple idea               â†’  Weaponized implementation     â”‚
â”‚  Basic workflow            â†’  Closed-loop automation        â”‚
â”‚  Any framework             â†’  Integrated into mekong-cli    â”‚
â”‚  External SaaS             â†’  Self-hosted + $0 cost         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Execution Rules
1. **MANDATORY**: Always check `@[.claude]` for agent configurations.
2. **MAXIMIZE**: Sá»­ dá»¥ng `quota_engine.py` vÃ  `antigravity-claude-proxy` Ä‘á»ƒ tá»‘i Æ°u chi phÃ­ (Gemini Models).
3. **INTEGRATE**: Má»i output pháº£i Ä‘Æ°á»£c tÃ­ch há»£p vÃ o `mekong-cli`.
4. **NO DEPENDENCY**: KhÃ´ng dÃ¹ng external tools náº¿u Antigravity cÃ³ thá»ƒ thay tháº¿.
5. **ZERO COST**: KhÃ´ng phá»¥ thuá»™c API costs náº¿u cÃ³ local processing available.
</file>

<file path=".claude/rules/00-core/quota-optimization.md">
# Quota Optimization Rule

> **"Tiáº¿t kiá»‡m lÃ  quá»‘c sÃ¡ch" - Tá»‘i Æ°u hÃ³a tÃ i nguyÃªn Gemini**

## 1. Principles
- **Maximize Free Tier**: Táº­n dá»¥ng tá»‘i Ä‘a Gemini Flash/Pro free tier.
- **Failover Strategy**: Flash (Speed) -> Pro (Depth) -> Ultra (Complex).
- **Caching**: Cache cÃ¡c káº¿t quáº£ heavy computation hoáº·c static knowledge.

## 2. Model Selection Strategy
| Task Type | Recommended Model | Reason |
|-----------|-------------------|--------|
| **Planning** | `gemini-3-pro` | Deep reasoning needed |
| **Coding** | `gemini-3-flash` | Speed & Context window |
| **Chat/Quick** | `gemini-3-flash` | Low latency |
| **Vision** | `gemini-3-flash` | Multimodal efficiency |

## 3. Proxy Configuration
- Use `antigravity-claude-proxy` running on port 8080.
- Monitor usage via `quota_server` MCP.
- Rotate keys if rate limits are hit (automatically handled by engine).

## 4. Token Economy
- **Context Loading**: Use `Task` tool over `Read` for large files when possible (let agents handle it).
- **Summarization**: Summarize massive logs before processing.
- **Modularization**: Keep files small (<200 lines) to save context.

## 5. Daily Quota Check
Run `commander` or `quota` MCP to check status:
```bash
# Check quota status
/quota/get_status
```
</file>

<file path=".claude/rules/00-core/revenue-model.md">
# Revenue Model Rules

> **Chiáº¿n lÆ°á»£c doanh thu linh hoáº¡t theo giai Ä‘oáº¡n**

## Tier 1: WARRIOR (Pre-Seed/Seed)
- **Retainer**: $2,000/month
- **Equity**: 5-8%
- **Success Fee**: 2% of funding
- **Focus**: Survival & PMF

## Tier 2: GENERAL (Series A)
- **Retainer**: $5,000/month
- **Equity**: +3-5% additional
- **Success Fee**: 1.5% of funding
- **Focus**: Scaling & Growth

## Tier 3: TÆ¯á»šNG QUÃ‚N (Venture Studio)
- **Retainer**: $0 (deferred)
- **Equity**: 15-30% co-founder
- **Exit**: Shared proceeds
- **Focus**: Market Dominance & Exit

## Revenue Mapping (13 Chapters)
| Chapter | Service | Price |
|---------|---------|-------|
| 1-4 | Strategy & Audit | $3K - $8K (One-off) |
| 5, 11 | Growth & Crisis | $5K/mo (Retainer) |
| 7, 12 | Sprint & Disruption | $10K - $15K (Project) |
| 9 | OKR Impl | $3K/qtr |
| 13 | VC Intel | $3K |
</file>

<file path=".claude/rules/00-core/win-win-win-gate.md">
# WIN-WIN-WIN Golden Rules

> **"ThÆ°á»£ng binh pháº¡t mÆ°u"** - Má»i hoáº¡t Ä‘á»™ng pháº£i táº¡o ra 3 WIN cÃ¹ng lÃºc.

## 1. The Trinity Check
TrÆ°á»›c Má»–I quyáº¿t Ä‘á»‹nh, há»i:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘‘ ANH (Owner) WIN gÃ¬?                       â”‚
â”‚  ğŸ¢ AGENCY WIN gÃ¬?                            â”‚
â”‚  ğŸš€ STARTUP/CLIENT WIN gÃ¬?                    â”‚
â”‚                                               â”‚
â”‚  âŒ Náº¿u báº¥t ká»³ bÃªn nÃ o LOSE â†’ Dá»ªNG Láº I       â”‚
â”‚  âœ… Cáº£ 3 WIN â†’ Tiáº¿n hÃ nh                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. Alignment Principles (NgÅ© Sá»±)

| Factor | CÃ¢u há»i |
|--------|---------|
| **Äáº¡o** | Lá»£i Ã­ch cÃ³ aligned khÃ´ng? |
| **ThiÃªn** | Timing cÃ³ phÃ¹ há»£p khÃ´ng? |
| **Äá»‹a** | Vá»‹ tháº¿ cÃ³ tá»‘i Æ°u khÃ´ng? |
| **TÆ°á»›ng** | Leadership cÃ³ rÃµ rÃ ng khÃ´ng? |
| **PhÃ¡p** | Quy trÃ¬nh cÃ³ chuáº©n khÃ´ng? |

## 3. Forbidden Actions (CÃ¡c Ä‘iá»u cáº¥m)
- âŒ Bill hours mÃ  khÃ´ng táº¡o outcome
- âŒ Láº¥y tiá»n mÃ  startup khÃ´ng grow
- âŒ Equity mÃ  khÃ´ng add value
- âŒ TÆ° váº¥n mÃ  khÃ´ng execution support
- âŒ One-sided win (chá»‰ agency win)

## 4. Mandatory Actions (CÃ¡c Ä‘iá»u pháº£i lÃ m)
- âœ… Equity + Cash aligned vá»›i startup success
- âœ… Success fee tied to outcomes
- âœ… Retainer exchanged for real deliverables
- âœ… Anti-dilution protection for founders
- âœ… Shared exit celebration
</file>

<file path=".claude/rules/01-strategy/13-chapters/01-ke-hoach.md">
# ChÆ°Æ¡ng 1: Káº¿ Hoáº¡ch (Strategy Assessment)

> **"Tri bá»‰ tri ká»·, bÃ¡ch chiáº¿n báº¥t Ä‘Ã£i"** - Biáº¿t ngÆ°á»i biáº¿t ta, trÄƒm tráº­n khÃ´ng nguy.

## Service: Strategy Assessment ($5K)

### Má»¥c tiÃªu
- ÄÃ¡nh giÃ¡ toÃ n diá»‡n hiá»‡n tráº¡ng Startup.
- PhÃ¢n tÃ­ch NgÅ© Sá»± (Äáº¡o, ThiÃªn, Äá»‹a, TÆ°á»›ng, PhÃ¡p).
- XÃ¡c Ä‘á»‹nh Ä‘iá»ƒm máº¡nh, Ä‘iá»ƒm yáº¿u, cÆ¡ há»™i, thÃ¡ch thá»©c.

### Deliverables
1. **Strategic Audit Report**: BÃ¡o cÃ¡o Ä‘Ã¡nh giÃ¡ chi tiáº¿t.
2. **SWOT Analysis**: PhÃ¢n tÃ­ch sÃ¢u.
3. **Action Plan**: Káº¿ hoáº¡ch hÃ nh Ä‘á»™ng sÆ¡ bá»™.
4. **Win-Win-Win Alignment**: XÃ¡c Ä‘á»‹nh sá»± phÃ¹ há»£p vá»›i Agency.

### Agent Workflow
- `binh-phap-strategist`: PhÃ¢n tÃ­ch tá»•ng quan.
- `researcher`: Thu tháº­p dá»¯ liá»‡u thá»‹ trÆ°á»ng.
- `win3-checker`: Kiá»ƒm tra Ä‘á»™ alignment.
</file>

<file path=".claude/rules/01-strategy/13-chapters/02-tac-chien.md">
# ChÆ°Æ¡ng 2: TÃ¡c Chiáº¿n (Runway Workshop)

> **"Binh quÃ½ tháº¯ng, báº¥t quÃ½ cá»­u"** - Viá»‡c binh cá»‘t tháº¯ng nhanh, khÃ´ng cá»‘t kÃ©o dÃ i.

## Service: Runway Workshop ($3K)

### Má»¥c tiÃªu
- TÃ­nh toÃ¡n vÃ  tá»‘i Æ°u Runway (thá»i gian sá»‘ng sÃ³t).
- Quáº£n lÃ½ dÃ²ng tiá»n (Cash flow management).
- Láº­p káº¿ hoáº¡ch tÃ i chÃ­nh ngáº¯n háº¡n.

### Deliverables
1. **Runway Calculator**: Báº£ng tÃ­nh chi tiáº¿t.
2. **Burn Rate Optimization**: Äá» xuáº¥t cáº¯t giáº£m chi phÃ­.
3. **Fundraising Timeline**: Lá»‹ch trÃ¬nh gá»i vá»‘n cáº§n thiáº¿t.

### Agent Workflow
- `revenue-engine`: TÃ­nh toÃ¡n tÃ i chÃ­nh.
- `database-admin`: Audit dá»¯ liá»‡u tÃ i chÃ­nh (náº¿u cÃ³).
- `planner`: Láº­p káº¿ hoáº¡ch tá»‘i Æ°u.
</file>

<file path=".claude/rules/01-strategy/13-chapters/03-muu-cong.md">
# ChÆ°Æ¡ng 3: MÆ°u CÃ´ng (Win-Without-Fighting)

> **"Báº¥t chiáº¿n nhi khuáº¥t nhÃ¢n chi binh"** - KhÃ´ng Ä‘Ã¡nh mÃ  tháº¯ng quÃ¢n Ä‘á»‹ch.

## Service: Win-Without-Fighting Strategy ($8K)

### Má»¥c tiÃªu
- TÃ¬m kiáº¿m "Blue Ocean" - thá»‹ trÆ°á»ng khÃ´ng cáº¡nh tranh.
- XÃ¢y dá»±ng lá»£i tháº¿ cáº¡nh tranh Ä‘á»™c quyá»n (Unfair Advantage).
- Chiáº¿n lÆ°á»£c Partnership thay vÃ¬ Competition.

### Deliverables
1. **Market Positioning**: Äá»‹nh vá»‹ thá»‹ trÆ°á»ng Ä‘á»™c Ä‘Ã¡o.
2. **Partnership Strategy**: Danh sÃ¡ch Ä‘á»‘i tÃ¡c chiáº¿n lÆ°á»£c.
3. **Value Proposition**: TuyÃªn ngÃ´n giÃ¡ trá»‹ cá»‘t lÃµi.

### Agent Workflow
- `binh-phap-strategist`: Thiáº¿t káº¿ chiáº¿n lÆ°á»£c.
- `client-magnet`: TÃ¬m kiáº¿m Ä‘á»‘i tÃ¡c tiá»m nÄƒng.
- `researcher`: PhÃ¢n tÃ­ch Ä‘á»‘i thá»§.
</file>

<file path=".claude/rules/01-strategy/13-chapters/04-hinh-the.md">
# ChÆ°Æ¡ng 4: HÃ¬nh Tháº¿ (Moat Audit)

> **"Thiá»‡n chiáº¿n giáº£, láº­p Æ° báº¥t báº¡i chi Ä‘á»‹a"** - NgÆ°á»i giá»i chiáº¿n tranh Ä‘á»©ng á»Ÿ tháº¿ khÃ´ng thá»ƒ báº¡i.

## Service: Moat Audit ($5K)

### Má»¥c tiÃªu
- XÃ¢y dá»±ng vÃ  cá»§ng cá»‘ hÃ o lÅ©y (Moat).
- Báº£o vá»‡ tÃ i sáº£n trÃ­ tuá»‡ vÃ  dá»¯ liá»‡u (Data Moat).
- Táº¡o rÃ o cáº£n gia nháº­p cho Ä‘á»‘i thá»§.

### Deliverables
1. **Moat Analysis**: ÄÃ¡nh giÃ¡ Ä‘á»™ sÃ¢u/rá»™ng cá»§a hÃ o lÅ©y.
2. **IP Protection Plan**: Káº¿ hoáº¡ch báº£o vá»‡ IP.
3. **Data Strategy**: Chiáº¿n lÆ°á»£c dá»¯ liá»‡u Ä‘á»™c quyá»n.

### Agent Workflow
- `researcher`: PhÃ¢n tÃ­ch hÃ o lÅ©y Ä‘á»‘i thá»§.
- `docs-manager`: TÃ i liá»‡u hÃ³a IP.
- `planner`: Káº¿ hoáº¡ch xÃ¢y dá»±ng Moat.
</file>

<file path=".claude/rules/01-strategy/13-chapters/05-the-tran.md">
# ChÆ°Æ¡ng 5: Tháº¿ Tráº­n (Growth Consulting)

> **"PhÃ m chiáº¿n giáº£, dÄ© chÃ­nh há»£p, dÄ© ká»³ tháº¯ng"** - Trong chiáº¿n tranh, dÃ¹ng chÃ­nh binh Ä‘á»ƒ Ä‘á»‘i Ä‘á»‹ch, dÃ¹ng ká»³ binh Ä‘á»ƒ tháº¯ng.

## Service: Growth Consulting ($5K/mo)

### Má»¥c tiÃªu
- TÄƒng trÆ°á»Ÿng ngÆ°á»i dÃ¹ng vÃ  doanh thu.
- Káº¿t há»£p Marketing (ChÃ­nh) vÃ  Growth Hacking (Ká»³).
- Tá»‘i Æ°u hÃ³a phá»…u chuyá»ƒn Ä‘á»•i (Conversion Funnel).

### Deliverables
1. **Monthly Growth Plan**: Káº¿ hoáº¡ch tÄƒng trÆ°á»Ÿng thÃ¡ng.
2. **Experiment Log**: Káº¿t quáº£ cÃ¡c thá»­ nghiá»‡m A/B.
3. **Metrics Dashboard**: BÃ¡o cÃ¡o chá»‰ sá»‘ KPI.

### Agent Workflow
- `marketing-server`: Thá»±c thi content/SEO.
- `client-magnet`: Lead generation.
- `revenue-engine`: Theo dÃµi doanh thu.
</file>

<file path=".claude/rules/01-strategy/13-chapters/06-hu-thuc.md">
# ChÆ°Æ¡ng 6: HÆ° Thá»±c (Anti-Dilution Shield)

> **"CÃ´ng ká»³ vÃ´ bá»‹, xuáº¥t ká»³ báº¥t Ã½"** - ÄÃ¡nh vÃ o chá»— khÃ´ng phÃ²ng bá»‹, xuáº¥t hiá»‡n lÃºc khÃ´ng ngá» tá»›i.

## Service: Anti-Dilution Shield ($10K)

### Má»¥c tiÃªu
- Báº£o vá»‡ quyá»n lá»£i Founder trong cÃ¡c vÃ²ng gá»i vá»‘n.
- Nháº­n diá»‡n "báº«y" trong Term Sheet (HÆ° - Thá»±c).
- ÄÃ m phÃ¡n Ä‘á»‹nh giÃ¡ vÃ  cÃ¡c Ä‘iá»u khoáº£n.

### Deliverables
1. **Term Sheet Review**: PhÃ¢n tÃ­ch chi tiáº¿t (Red/Green flags).
2. **Cap Table Simulation**: MÃ´ phá»ng pha loÃ£ng.
3. **Negotiation Script**: Ká»‹ch báº£n Ä‘Ã m phÃ¡n.

### Agent Workflow
- `vc-hub`: PhÃ¢n tÃ­ch VC terms.
- `binh-phap-strategist`: Chiáº¿n lÆ°á»£c Ä‘Ã m phÃ¡n.
- `revenue-engine`: MÃ´ phá»ng tÃ i chÃ­nh.
</file>

<file path=".claude/rules/01-strategy/13-chapters/07-quan-tranh.md">
# ChÆ°Æ¡ng 7: QuÃ¢n Tranh (Speed Sprint)

> **"Láº¥y gáº§n Ä‘á»£i xa, láº¥y nhÃ n Ä‘á»£i má»‡t"** - GiÃ nh lá»£i tháº¿ vá» vá»‹ trÃ­ vÃ  thá»i gian.

## Service: Speed Sprint ($15K)

### Má»¥c tiÃªu
- Thá»±c thi nhanh má»™t tÃ­nh nÄƒng hoáº·c chiáº¿n dá»‹ch (Sprint).
- ÄÃ¡nh chiáº¿m thá»‹ pháº§n trÆ°á»›c Ä‘á»‘i thá»§ (First Mover).
- Tá»‘i Æ°u hÃ³a quy trÃ¬nh váº­n hÃ nh (Ops).

### Deliverables
1. **MVP/Feature Launch**: Sáº£n pháº©m/tÃ­nh nÄƒng hoÃ n thiá»‡n.
2. **Sprint Report**: BÃ¡o cÃ¡o tá»‘c Ä‘á»™ vÃ  hiá»‡u quáº£.
3. **Operational Playbook**: Quy trÃ¬nh Ä‘Ã£ tá»‘i Æ°u.

### Agent Workflow
- `coding-server`: Code & Ship nhanh.
- `project-manager`: Quáº£n lÃ½ tiáº¿n Ä‘á»™ Sprint.
- `tester`: Äáº£m báº£o cháº¥t lÆ°á»£ng.
</file>

<file path=".claude/rules/01-strategy/13-chapters/08-cuu-bien.md">
# ChÆ°Æ¡ng 8: Cá»­u Biáº¿n (Pivot Workshop)

> **"TÆ°á»›ng cÃ³ nÄƒm Ä‘iá»u nguy"** - Biáº¿t tÃ¹y cÆ¡ á»©ng biáº¿n trÆ°á»›c cÃ¡c tÃ¬nh huá»‘ng khÃ¡c nhau.

## Service: Pivot Workshop ($5K)

### Má»¥c tiÃªu
- Nháº­n diá»‡n tÃ­n hiá»‡u cáº§n thay Ä‘á»•i (Pivot).
- Láº­p káº¿ hoáº¡ch chuyá»ƒn hÆ°á»›ng chiáº¿n lÆ°á»£c.
- Quáº£n lÃ½ rá»§i ro khi thay Ä‘á»•i mÃ´ hÃ¬nh.

### Deliverables
1. **Pivot Strategy**: Chiáº¿n lÆ°á»£c chuyá»ƒn hÆ°á»›ng.
2. **Risk Assessment**: ÄÃ¡nh giÃ¡ rá»§i ro 5 Ä‘iá»u nguy.
3. **Communication Plan**: Káº¿ hoáº¡ch truyá»n thÃ´ng ná»™i bá»™/Ä‘á»‘i ngoáº¡i.

### Agent Workflow
- `binh-phap-strategist`: PhÃ¢n tÃ­ch tÃ¬nh huá»‘ng.
- `researcher`: TÃ¬m kiáº¿m hÆ°á»›ng Ä‘i má»›i.
- `agency-server`: Validate WIN-WIN-WIN cho hÆ°á»›ng má»›i.
</file>

<file path=".claude/rules/01-strategy/13-chapters/09-hanh-quan.md">
# ChÆ°Æ¡ng 9: HÃ nh QuÃ¢n (OKR Implementation)

> **"Lá»‡nh dÃ¢n nhÆ° lá»‡nh lá»­a"** - Tá»• chá»©c vÃ  ká»· luáº­t trong hÃ nh Ä‘á»™ng.

## Service: OKR Implementation ($3K/qtr)

### Má»¥c tiÃªu
- Thiáº¿t láº­p má»¥c tiÃªu (Objectives) vÃ  káº¿t quáº£ then chá»‘t (Key Results).
- Äá»“ng bá»™ hÃ³a Ä‘á»™i ngÅ© (Alignment).
- Theo dÃµi vÃ  Ä‘Ã¡nh giÃ¡ Ä‘á»‹nh ká»³.

### Deliverables
1. **OKR Dashboard**: Báº£ng theo dÃµi OKR.
2. **Alignment Workshop**: Buá»•i lÃ m viá»‡c thá»‘ng nháº¥t má»¥c tiÃªu.
3. **Review Report**: BÃ¡o cÃ¡o káº¿t quáº£ quÃ½.

### Agent Workflow
- `project-manager`: Theo dÃµi tiáº¿n Ä‘á»™.
- `agency-server`: BÃ¡o cÃ¡o Ä‘á»‹nh ká»³.
- `docs-manager`: TÃ i liá»‡u hÃ³a má»¥c tiÃªu.
</file>

<file path=".claude/rules/01-strategy/13-chapters/10-dia-hinh.md">
# ChÆ°Æ¡ng 10: Äá»‹a HÃ¬nh (Market Entry)

> **"Biáº¿t Ä‘á»‹a hÃ¬nh thÃ¬ tháº¯ng, khÃ´ng biáº¿t thÃ¬ thua"** - PhÃ¢n tÃ­ch cÃ¡c loáº¡i Ä‘á»‹a hÃ¬nh (thá»‹ trÆ°á»ng).

## Service: Market Entry ($8K)

### Má»¥c tiÃªu
- PhÃ¢n tÃ­ch thá»‹ trÆ°á»ng má»›i (Go-to-Market).
- Chá»n lá»±a phÃ¢n khÃºc má»¥c tiÃªu (Segment).
- Äiá»u chá»‰nh sáº£n pháº©m phÃ¹ há»£p (Product-Market Fit).

### Deliverables
1. **GTM Strategy**: Chiáº¿n lÆ°á»£c thÃ¢m nháº­p thá»‹ trÆ°á»ng.
2. **Competitor Landscape**: Báº£n Ä‘á»“ Ä‘á»‘i thá»§.
3. **Localization Plan**: Káº¿ hoáº¡ch Ä‘á»‹a phÆ°Æ¡ng hÃ³a (náº¿u cáº§n).

### Agent Workflow
- `researcher`: PhÃ¢n tÃ­ch thá»‹ trÆ°á»ng.
- `marketing-server`: Káº¿ hoáº¡ch Marketing.
- `client-magnet`: Test thá»‹ trÆ°á»ng.
</file>

<file path=".claude/rules/01-strategy/13-chapters/11-cuu-dia.md">
# ChÆ°Æ¡ng 11: Cá»­u Äá»‹a (Crisis Retainer)

> **"VÃ o Ä‘áº¥t cháº¿t thÃ¬ sáº½ sá»‘ng"** - Chiáº¿n lÆ°á»£c sinh tá»“n trong khá»§ng hoáº£ng.

## Service: Crisis Retainer ($5K/mo)

### Má»¥c tiÃªu
- Quáº£n lÃ½ khá»§ng hoáº£ng (PR, TÃ i chÃ­nh, NhÃ¢n sá»±).
- Giá»¯ vá»¯ng tÃ¢m lÃ½ Ä‘á»™i ngÅ© (Morale).
- TÃ¬m cÆ¡ há»™i trong nguy cÆ¡.

### Deliverables
1. **Crisis Response Plan**: Káº¿ hoáº¡ch á»©ng phÃ³ kháº©n cáº¥p.
2. **Communication Protocols**: Quy trÃ¬nh truyá»n thÃ´ng.
3. **Recovery Roadmap**: Lá»™ trÃ¬nh phá»¥c há»“i.

### Agent Workflow
- `binh-phap-strategist`: Chá»‰ Ä‘áº¡o chiáº¿n lÆ°á»£c.
- `agency-server`: Há»— trá»£ nguá»“n lá»±c.
- `revenue-engine`: Quáº£n lÃ½ dÃ²ng tiá»n kháº©n cáº¥p.
</file>

<file path=".claude/rules/01-strategy/13-chapters/12-hoa-cong.md">
# ChÆ°Æ¡ng 12: Há»a CÃ´ng (Disruption Strategy)

> **"DÃ¹ng lá»­a Ä‘á»ƒ táº¥n cÃ´ng"** - Sá»­ dá»¥ng cÃ´ng nghá»‡ Ä‘á»™t phÃ¡ Ä‘á»ƒ táº¥n cÃ´ng.

## Service: Disruption Strategy ($10K)

### Má»¥c tiÃªu
- á»¨ng dá»¥ng cÃ´ng nghá»‡ má»›i (AI, Blockchain) Ä‘á»ƒ táº¡o Ä‘á»™t phÃ¡.
- Táº¥n cÃ´ng vÃ o Ä‘iá»ƒm yáº¿u cá»‘t tá»­ cá»§a Ä‘á»‘i thá»§ lá»›n.
- Scale up nhanh chÃ³ng (Blitzscaling).

### Deliverables
1. **Tech Disruption Plan**: Káº¿ hoáº¡ch á»©ng dá»¥ng cÃ´ng nghá»‡.
2. **Scalability Audit**: ÄÃ¡nh giÃ¡ kháº£ nÄƒng má»Ÿ rá»™ng.
3. **AI Integration**: TÃ­ch há»£p AI vÃ o sáº£n pháº©m (Nuclear Weaponization).

### Agent Workflow
- `coding-server`: Triá»ƒn khai cÃ´ng nghá»‡.
- `researcher`: Cáº­p nháº­t cÃ´ng nghá»‡ má»›i.
- `planner`: Láº­p káº¿ hoáº¡ch táº¥n cÃ´ng.
</file>

<file path=".claude/rules/01-strategy/13-chapters/13-dung-gian.md">
# ChÆ°Æ¡ng 13: Dá»¥ng GiÃ¡n (VC Intelligence)

> **"Biáº¿t tÃ¬nh hÃ¬nh Ä‘á»‹ch lÃ  nhá» giÃ¡n Ä‘iá»‡p"** - ThÃ´ng tin tÃ¬nh bÃ¡o.

## Service: VC Intelligence ($3K)

### Má»¥c tiÃªu
- Thu tháº­p thÃ´ng tin vá» kháº©u vá»‹ Ä‘áº§u tÆ° cá»§a VC.
- Káº¿t ná»‘i Ä‘Ãºng ngÆ°á»i, Ä‘Ãºng viá»‡c (Networking).
- Chuáº©n bá»‹ Due Diligence (DD).

### Deliverables
1. **VC List**: Danh sÃ¡ch VC phÃ¹ há»£p (Target List).
2. **Investor Profiles**: Há»“ sÆ¡ chi tiáº¿t tá»«ng nhÃ  Ä‘áº§u tÆ°.
3. **Pitch Deck Feedback**: GÃ³p Ã½ tá»« gÃ³c nhÃ¬n nhÃ  Ä‘áº§u tÆ°.

### Agent Workflow
- `vc-hub`: Thu tháº­p dá»¯ liá»‡u VC.
- `client-magnet`: Outreach nhÃ  Ä‘áº§u tÆ°.
- `researcher`: Background check.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-01-trinity-lock.md">
# Tactical Pattern 01: The Trinity Lock

> **Win-Win-Win Validation Protocol**

## Context
Use when making ANY strategic decision or signing a deal.

## Pattern
1. **Trigger**: New deal / Feature / Hire / Pivot.
2. **Action**: Run `win3-checker` agent.
3. **Check**:
   - ğŸ‘‘ Owner: Equity/Cash/Legacy?
   - ğŸ¢ Agency: Asset/Reputation?
   - ğŸš€ Client: Growth/Protection?
4. **Resolution**:
   - If 3/3 Win -> **GO**
   - If <3 Win -> **STOP & RENEGOTIATE**

## Code Ref
`antigravity/mcp_servers/agency_server/handlers.py` -> `validate_win()`
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-02-nuclear-conversion.md">
# Tactical Pattern 02: Nuclear Conversion

> **Input -> Nuclear Weapon Output**

## Context
Use when implementing any feature requested by the user.

## Pattern
1. **Input**: User gives a simple request (e.g., "Add a form").
2. **Enhance**: Apply `nuclear-weaponization` rule.
   - Can we automate it?
   - Can we make it simpler?
   - Can we integrate it with existing systems?
   - Can we make it $0 cost?
3. **Output**: Delivered feature is robust, integrated, and "weaponized" (high leverage).

## Example
User: "I need a script to email leads."
Agent: Creates `client-magnet` module with automated qualification, CRM sync, and usage quotas.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-03-five-factor-audit.md">
# Tactical Pattern 03: The 5-Factor Audit

> **NgÅ© Sá»± Analysis**

## Context
Use for Strategy Assessment (Chapter 1) or periodically.

## Pattern
1. **Äáº¡o (Moral Law)**: Is the mission clear and shared?
2. **ThiÃªn (Heaven)**: Is the market timing right? (Macro)
3. **Äá»‹a (Earth)**: Do we have a defensible position? (Micro/Moat)
4. **TÆ°á»›ng (Commander)**: Is the leadership capable?
5. **PhÃ¡p (Method)**: Are operations disciplined?

## Output
A scorecard (1-10) for each factor to identify the weakest link.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-04-anti-dilution-shield.md">
# Tactical Pattern 04: The Anti-Dilution Shield

> **Funding Protection**

## Context
Use when a startup client receives a Term Sheet.

## Pattern
1. **Scan**: Look for Liquidation Pref > 1x, Full Ratchet, Board control flip.
2. **Flag**: Highlight dangerous terms immediately.
3. **Counter**: Propose standard terms (Weighted Average, Founder Control).
4. **Agent**: Deploy `vc-hub` to compare with market standards.

## Goal
Preserve founder ownership and agency equity value.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-05-auto-accept-velocity.md">
# Tactical Pattern 05: Auto-Accept Velocity

> **Speed over Permission**

## Context
Daily development workflow.

## Pattern
1. **Default**: Run standard commands (`ls`, `cat`, `test`, `build`) without asking.
2. **Exception**: Stop only for destructive acts (`rm`, `push`, `deploy`).
3. **Override**: If user says "Just do it", switch to fully autonomous mode for that session.

## Benefit
Reduces friction, increases velocity (QuÃ¢n Tranh - Speed).
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-06-data-diet.md">
# Tactical Pattern 06: Data Diet Discipline

> **Security by Exclusion**

## Context
Handling any data, logs, or git commits.

## Pattern
1. **Filter**: Before logging, grep for `key`, `pass`, `secret`.
2. **Ignore**: Add `.env`, `*.pem`, `*.key` to `.gitignore` globally.
3. **Ask**: If a file is blocked by privacy hook, ask explicitly with `AskUserQuestion`.
4. **Never Assume**: Treat all unknown files as potentially sensitive.

## Goal
Zero leaks, zero trust.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-07-bridge-sync.md">
# Tactical Pattern 07: Bridge Synchronization

> **Consistency is Power**

## Context
Managing the dual-brain system (Claude + Gemini).

## Pattern
1. **Check**: Run `scripts/verify_all_mcp.py` to check server status.
2. **Compare**: Check agent counts in `bridge-sync.md`.
3. **Sync**: If Gemini has new capabilities, update `.claude/mcp-catalog.json`.
4. **Deploy**: Ensure both sides have access to the same tools (via MCP).

## Goal
Unified intelligence, no capability gaps.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-08-daily-alignment.md">
# Tactical Pattern 08: Daily Alignment Check

> **The End-of-Day Ritual**

## Context
Closing a session or day.

## Pattern
1. **Review**: Look back at completed tasks.
2. **Score**: Did we hit the WIN-WIN-WIN criteria?
3. **Log**: Record wins for Owner, Agency, and Client.
4. **Plan**: Set the Strategy for tomorrow (Planning/Káº¿ Hoáº¡ch).

## Goal
Continuous strategic alignment.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-09-revenue-tiering.md">
# Tactical Pattern 09: Revenue Tiering

> **Value Extraction**

## Context
Pricing services or negotiating contracts.

## Pattern
1. **Assess**: Which stage is the startup? (Seed, Series A, Venture Studio).
2. **Select**: Apply the corresponding tier rules (Warrior, General, TÆ°á»›ng QuÃ¢n).
3. **Offer**: Present the package (Retainer + Equity + Success Fee).
4. **Enforce**: Don't deviate from the standard without a Win3 check.

## Goal
Standardized, fair, and scalable revenue.
</file>

<file path=".claude/rules/01-strategy/tactical-patterns/pattern-10-agent-delegation.md">
# Tactical Pattern 10: Agent Delegation

> **The Digital Army**

## Context
Executing complex tasks.

## Pattern
1. **Decompose**: Break task into sub-tasks.
2. **Assign**:
   - Strategy -> `binh-phap-strategist`
   - Code -> `coding-server`
   - Marketing -> `marketing-server`
   - Ops -> `agency-server`
3. **Orchestrate**: Use `commander_server` or Main Agent to coordinate.
4. **Verify**: Check outputs against requirements.

## Goal
Efficient execution using specialized agents.
</file>

<file path=".claude/rules/02-development/python/fastapi-routes.md">
# FastAPI Route Standards

Guidelines for building API endpoints with FastAPI.

## Rules
- Use descriptive path names and HTTP methods.
- Leverage Pydantic models for request bodies and response schemas.
- Use FastAPI's `Depends` for dependency injection (e.g., DB session, Auth).
- Define clear tags for OpenAPI/Swagger documentation.
- Use `status_code` for appropriate HTTP responses (e.g., 201 for Created).
- Handle common errors (404, 400) using `HTTPException`.
- Keep route handlers thin; delegate business logic to service layers.
</file>

<file path=".claude/rules/02-development/python/py-classes.md">
# Python Class Standards

Guidelines for defining and using classes in Python.

## Rules
- Follow PEP 8 guidelines for class structure.
- Always include a docstring for the class and its public methods.
- Use `@classmethod` and `@staticmethod` decorators appropriately.
- Prefer composition over inheritance unless there is a clear "is-a" relationship.
- Use `@property` for getter and setter patterns instead of explicit `get_x` and `set_x` methods.
- Initialize all attributes in the `__init__` method.
- Keep classes focused on a single responsibility.
</file>

<file path=".claude/rules/02-development/python/py-docstrings.md">
# Python Docstring Standards

Guidelines for documenting Python code using docstrings.

## Rules
- Use triple double quotes `"""Docstring contents"""`.
- Follow the Google Style or NumPy style for docstrings.
- Include a one-line summary followed by a detailed description if necessary.
- Document arguments (`Args`), return values (`Returns`), and exceptions (`Raises`).
- Keep docstrings up-to-date as the code changes.
- Use docstrings for modules, classes, and public functions/methods.
</file>

<file path=".claude/rules/02-development/python/py-exceptions.md">
# Python Exception Handling

Standard patterns for error management in Python.

## Rules
- Catch specific exceptions instead of a bare `except:`.
- Use `try/except/finally` for resource cleanup (or use `with` statements).
- Raise custom exceptions for domain-specific errors.
- Include helpful error messages and context when raising exceptions.
- Log exceptions with `logging.exception()` to capture stack traces.
- Avoid suppressing exceptions unless there is a very good reason.
- Use the `raise from` syntax to preserve the original exception context (exception chaining).
</file>

<file path=".claude/rules/02-development/python/py-functions.md">
# Python Function Guidelines

Best practices for writing functions in Python.

## Rules
- Keep functions small and focused on a single task.
- Use descriptive names that imply action (e.g., `calculate_revenue` instead of `revenue`).
- Use type hints for all parameters and return values.
- Limit the number of arguments (prefer passing an object or dictionary if > 4).
- Use default arguments for optional parameters.
- Always include a docstring if the function is public or complex.
- Avoid side effects in functions that return a value.
</file>

<file path=".claude/rules/02-development/python/py-modules.md">
# Python Module and Package Standards

Guidelines for organizing Python code.

## Rules
- Use `__init__.py` to define package interfaces and exports.
- Follow a logical directory structure (e.g., `core/`, `utils/`, `api/`).
- Use absolute imports instead of relative imports.
- Keep `__init__.py` files thin; avoid putting heavy logic in them.
- Use `if __name__ == "__main__":` for scripts that can be executed.
- Explicitly list public APIs using the `__all__` variable in modules.
</file>

<file path=".claude/rules/02-development/python/py-naming.md">
# Python Naming Conventions

Standards for naming Python entities in the Antigravity ecosystem.

## Rules
- Use `PascalCase` for classes.
- Use `snake_case` for variables, functions, methods, and modules.
- Use `SCREAMING_SNAKE_CASE` for constants.
- Internal members should be prefixed with a single underscore (e.g., `_internal_method`).
- Private members (to avoid name clashes) should be prefixed with double underscores (e.g., `__private_variable`).
- File names should be `snake_case` and descriptive (e.g., `revenue_engine.py`).
- Avoid single-letter variable names except in short loops or mathematical expressions.
</file>

<file path=".claude/rules/02-development/python/py-typing.md">
# Python Typing Standards

Guidelines for using type hints in Python.

## Rules
- Use `typing` module (or built-in types in 3.9+) for all type annotations.
- Annotate function signatures: `def func(a: int, b: str) -> bool:`.
- Use `Optional[Type]` for variables that can be `None`.
- Use `Union[Type1, Type2]` for variables that can be multiple types.
- Use `Any` sparingly; prefer more specific types or `TypeVar` for generics.
- Leverage `Protocol` from `typing` for structural subtyping (interfaces).
- Run `mypy` or a similar type checker to verify annotations.
</file>

<file path=".claude/rules/02-development/python/pydantic-models.md">
# Pydantic Model Standards

Guidelines for using Pydantic models for data validation.

## Rules
- Use `BaseModel` for all data schemas.
- Leverage `Field` for adding metadata, descriptions, and validations (e.g., `gt`, `le`).
- Use `ConfigDict` (or `class Config` in older versions) to control model behavior (e.g., `extra='forbid'`).
- Define `RootModel` when the root type is not a dictionary.
- Use `model_validator` and `field_validator` for complex custom validations.
- Ensure all fields have clear types and, where appropriate, default values.
</file>

<file path=".claude/rules/02-development/python/sqlalchemy-models.md">
# SQLAlchemy Model Standards

Guidelines for defining database models using SQLAlchemy.

## Rules
- Use the Declarative Base for model definitions.
- Define explicit table names using `__tablename__`.
- Use type-annotated columns (e.g., `Mapped[int]`).
- Define relationships clearly with `relationship()` and specify `back_populates`.
- Use indexes on columns that are frequently used in filters or joins.
- Avoid `dynamic` loaders unless necessary for large collections.
- Keep models focused on data structure; move business logic to services.
</file>

<file path=".claude/rules/02-development/testing/e2e-testing.md">
# E2E Testing Standards

Guidelines for end-to-end testing of the entire system.

## Rules
- Test critical user journeys from start to finish (e.g., signup to purchase).
- Use tools like `Playwright` or `Cypress` for web applications.
- Run E2E tests against a production-like environment (staging).
- Minimize the number of E2E tests to focus on high-value paths due to their execution cost.
- Ensure tests are resilient to minor UI changes by using stable selectors (e.g., `data-testid`).
- Automated E2E tests must pass before any production deployment.
</file>

<file path=".claude/rules/02-development/testing/integration-testing.md">
# Integration Testing Standards

Guidelines for testing the interactions between different modules or services.

## Rules
- Focus on the boundaries between units and external systems.
- Use real databases or services when possible, or high-fidelity mocks/containers.
- Test data flow across multiple layers (e.g., API -> Service -> DB).
- Verify that components work together as expected under various conditions.
- Clean up test data after each test run to ensure isolation.
- Integration tests should be part of the CI pipeline but may run separately from unit tests if slow.
</file>

<file path=".claude/rules/02-development/testing/mocking.md">
# Mocking Guidelines

Best practices for using mocks, stubs, and spies in tests.

## Rules
- Mock external dependencies (APIs, third-party libraries) to ensure test stability and speed.
- Avoid over-mocking; if a unit is too hard to test without many mocks, consider refactoring it.
- Use standard mocking libraries (e.g., `unittest.mock` in Python, `vi.mock` in Vitest).
- Verify mock interactions (e.g., "was this function called with these arguments?").
- Prefer using "fakes" or "stubs" for complex data dependencies.
- Ensure mocks accurately reflect the behavior and signature of the real objects.
</file>

<file path=".claude/rules/02-development/testing/test-coverage.md">
# Test Coverage Standards

Guidelines for measuring and maintaining test coverage.

## Rules
- Aim for at least 80% overall code coverage.
- Critical business logic and security-sensitive code must have 100% coverage.
- Use coverage reports to identify untested paths, not just as a metric to chase.
- Integrate coverage checks into the CI/CD pipeline; fail builds if coverage drops below the threshold.
- Exclude boilerplate, configuration, and auto-generated code from coverage metrics.
- Regularly review coverage reports to ensure meaningful tests are being written.
</file>

<file path=".claude/rules/02-development/testing/unit-testing.md">
# Unit Testing Standards

Guidelines for writing effective unit tests in the Antigravity ecosystem.

## Rules
- Test small, isolated units of code (functions, methods, classes).
- Use `pytest` for Python and `vitest` or `jest` for TypeScript.
- Follow the Arrange-Act-Assert (AAA) pattern.
- Aim for high branch coverage within the unit.
- Keep tests fast and independent of external systems (DB, API).
- Use descriptive test names that explain the expected behavior.
- Ensure 100% pass rate before any commit.
</file>

<file path=".claude/rules/02-development/typescript/api-client.md">
# API Client Guidelines

Standards for interacting with backend services.

## Rules
- Centralize API calls in a dedicated client module (e.g., `src/api/`).
- Use `TanStack Query` (React Query) for data fetching, caching, and synchronization.
- Define request and response types for all API endpoints.
- Include authentication headers automatically using interceptors.
- Implement retry logic and timeout handling for network requests.
- Log all API errors to a central monitoring service.
</file>

<file path=".claude/rules/02-development/typescript/react-components.md">
# React Component Standards

Guidelines for building React components in the Antigravity ecosystem.

## Rules
- Use Functional Components with hooks; avoid Class Components.
- One component per file, named after the component (e.g., `UserCard.tsx`).
- Use `memo` for performance-critical components with stable props.
- Keep components small (<150 lines); split into sub-components if they grow too large.
- Adhere to MD3 (Material Design 3) for all UI components.
- Use Tailwind CSS for styling via the `ui-styling` skill.
</file>

<file path=".claude/rules/02-development/typescript/react-hooks.md">
# React Hooks Guidelines

Best practices for using and creating React hooks.

## Rules
- Follow the "Rules of Hooks" (no hooks in loops, conditions, or nested functions).
- Extract complex logic into custom hooks (e.g., `useUserSession`, `useDataFetch`).
- Use `useCallback` and `useMemo` sparingly, only for expensive operations or to maintain referential identity.
- Prefix custom hooks with `use`.
- Ensure hooks are properly typed, including return values and dependency arrays.
- Avoid side effects in the render body; use `useEffect` or event handlers.
</file>

<file path=".claude/rules/02-development/typescript/react-props.md">
# React Props Standards

Guidelines for passing data to components.

## Rules
- Explicitly define prop types using interfaces or types.
- Destructure props in the component signature for clarity.
- Provide default values for optional props.
- Avoid passing too many props; consider context or state management for deep prop drilling.
- Use the `children` prop for layout or wrapper components.
- Keep props immutable; do not modify props within the component.
</file>

<file path=".claude/rules/02-development/typescript/state-management.md">
# State Management Patterns

Standards for managing application state.

## Rules
- Use local `useState` for component-specific state.
- Use `useContext` for small, global state (e.g., theme, user session).
- For complex global state, use dedicated stores (e.g., Zustand, Redux Toolkit).
- Keep state as flat as possible; avoid deep nesting.
- Derive state whenever possible instead of duplicating it in multiple places.
- Use `useReducer` for complex state transitions.
</file>

<file path=".claude/rules/02-development/typescript/ts-async.md">
# TypeScript Async Programming

Best practices for handling asynchronous operations.

## Rules
- Always use `async/await` syntax instead of raw `.then()` chains.
- Use `Promise.all()` or `Promise.allSettled()` for parallel execution of independent promises.
- Wrap async calls in `try/catch` blocks for robust error handling.
- Explicitly return `Promise<Type>` in function signatures for async functions.
- Avoid creating floating promises; always `await` or handle them explicitly.
- Use `AbortController` for cancellable async operations (e.g., fetch).
</file>

<file path=".claude/rules/02-development/typescript/ts-error-handling.md">
# TypeScript Error Handling

Standard patterns for error management.

## Rules
- Use custom error classes that extend `Error` for domain-specific failures.
- Throw errors early (fail-fast) and handle them at the appropriate layer.
- Ensure all caught errors are properly logged with context before being re-thrown or suppressed.
- Use `instanceof` to distinguish between different error types in catch blocks.
- Never use empty catch blocks; at least log the error.
- Provide user-friendly error messages while keeping technical details in internal logs.
</file>

<file path=".claude/rules/02-development/typescript/ts-interfaces.md">
# TypeScript Interfaces

Guidelines for defining and using interfaces.

## Rules
- Prefer `interface` over `type` for object definitions that may be extended.
- Keep interfaces focused and small (Interface Segregation Principle).
- Use optional properties (`?`) sparingly; prefer union types or explicit nulls if a property must exist.
- Document complex interface properties with JSDoc comments.
- Export interfaces from central `types.ts` or `index.ts` files within a module.
- Use `readonly` for properties that should not be modified after initialization.
</file>

<file path=".claude/rules/02-development/typescript/ts-naming.md">
# TypeScript Naming Conventions

Standards for naming TypeScript entities in the Antigravity ecosystem.

## Rules
- Use `PascalCase` for classes, interfaces, types, and enums.
- Use `camelCase` for variables, functions, and class instances.
- Use `kebab-case` for file and directory names.
- Interfaces should NOT be prefixed with `I` (e.g., use `User` instead of `IUser`).
- Enums should be singular (e.g., `Direction` instead of `Directions`).
- Boolean variables should use prefixes like `is`, `has`, `can`, or `should`.
- Descriptive names are preferred over brevity (e.g., `customerAuthenticationStatus` over `authStatus`).
</file>

<file path=".claude/rules/02-development/typescript/ts-types.md">
# TypeScript Types

Guidelines for using advanced type features.

## Rules
- Prefer `type` for unions, intersections, and primitives.
- Use `unknown` instead of `any` for values of uncertain type.
- Avoid type assertions (`as Type`) unless absolutely necessary (e.g., interacting with external libraries).
- Leverage `Utility Types` (e.g., `Partial`, `Pick`, `Omit`) to derive types from existing ones.
- Define constant values using `as const` for literal type inference.
- Use template literal types for string pattern matching.
</file>

<file path=".claude/rules/03-operations/ci-cd/artifact-management.md">
# Artifact Management Standards

Guidelines for storing and managing build artifacts.

## Rules
- All production-ready artifacts must be stored in a central registry (e.g., GitHub Packages, Docker Hub, AWS ECR).
- Artifacts must be immutable; once published, they should never be overwritten.
- Use clear and consistent naming conventions for all artifacts.
- Implement a retention policy to clean up old or unused artifacts.
- Ensure access to the artifact registry is properly secured and audited.
- Store build metadata (commit hash, build number, test results) alongside the artifact.
</file>

<file path=".claude/rules/03-operations/ci-cd/build-pipeline.md">
# Build Pipeline Standards

Guidelines for the automated build process.

## Rules
- The build process must be idempotent and reproducible.
- Use a clean environment for every build (e.g., Docker containers).
- Optimize build time by leveraging caching for dependencies and intermediate steps.
- Produce versioned artifacts for every successful build on the main branch.
- Log all build steps and output artifacts to a central location.
- Fail the build immediately upon any error (fail-fast).
- Ensure the build environment matches the production environment as closely as possible.
</file>

<file path=".claude/rules/03-operations/ci-cd/docker-build.md">
# Docker Build Standards

Guidelines for creating Docker images.

## Rules
- Use official, minimal base images (e.g., `alpine`, `slim`).
- Multi-stage builds should be used to minimize the final image size.
- Do not run containers as `root`; create a dedicated non-privileged user.
- Explicitly set the `WORKDIR` and use `COPY` instead of `ADD`.
- Order `Dockerfile` instructions to optimize layer caching (e.g., copy dependency files first).
- Use `.dockerignore` to exclude unnecessary files from the build context.
- Tag images with the git commit SHA and semantic version.
</file>

<file path=".claude/rules/03-operations/ci-cd/environment-vars.md">
# Environment Variables Standards

Guidelines for managing environment-specific configuration.

## Rules
- Never hardcode environment-specific values in the codebase.
- Use `.env.example` to document all required environment variables.
- Sensitive variables (API keys, passwords) must be stored in a secure secret manager, not in the CI/CD configuration.
- Use a consistent naming convention (e.g., `APP_PORT`, `DB_URL`) in uppercase.
- Validate the presence and format of required environment variables at application startup.
- Differentiate between build-time and run-time environment variables.
- Environment variables must be scoped to the appropriate environment (dev, staging, prod).
</file>

<file path=".claude/rules/03-operations/ci-cd/github-actions.md">
# GitHub Actions Standards

Guidelines for creating and maintaining GitHub Actions workflows.

## Rules
- Use versioned actions (e.g., `actions/checkout@v4`) instead of `master` or `main`.
- Keep workflow files modular and use reusable workflows or actions for common tasks.
- Use `secrets` for sensitive information and `vars` for non-sensitive configuration.
- Implement concurrency control to avoid multiple runs of the same workflow on the same branch.
- Use `if` conditions to limit workflow execution to relevant branches or events.
- Add descriptive names to jobs and steps for easier debugging.
- Regularly audit and update action versions to incorporate security patches and improvements.
</file>

<file path=".claude/rules/03-operations/ci-cd/linting-ci.md">
# Linting in CI Standards

Guidelines for automated linting and code style enforcement.

## Rules
- Linting must be an integral part of the CI pipeline.
- Use project-standard configuration files (e.g., `.eslintrc`, `.prettierrc`, `pyproject.toml`).
- All linting errors must be resolved; warnings should be minimized.
- Automated code formatting (e.g., Prettier, Black) should be run as part of the pipeline or pre-commit hooks.
- Linting failures must block the PR merge.
- Use specialized linters for specific technologies (e.g., ShellCheck for bash, Hadolint for Dockerfiles).
</file>

<file path=".claude/rules/03-operations/ci-cd/pr-checks.md">
# PR Checks Standards

Mandatory checks that must pass before a Pull Request can be merged.

## Rules
- All automated tests (unit, integration) must pass.
- Linting and static analysis (e.g., ESLint, Flake8, Mypy) must pass with zero errors.
- Code coverage must not decrease below the established threshold.
- At least one approved code review from a designated reviewer is required.
- Build process must complete successfully for all target platforms.
- Security scans must not report any high or critical vulnerabilities.
- PR title and description must follow the project's contribution guidelines.
</file>

<file path=".claude/rules/03-operations/ci-cd/release-flow.md">
# Release Flow Standards

Guidelines for releasing new versions of the software.

## Rules
- Use a branching strategy like GitFlow or GitHub Flow.
- All releases must be tagged in Git using Semantic Versioning (SemVer).
- Automated release notes generation based on commit messages.
- Production releases must be triggered by a manual approval or a specific tag.
- Maintain a clear changelog that is updated automatically during the release process.
- Perform a "dry run" or deployment to staging before any production release.
- Ensure all stakeholders are notified of upcoming and completed releases.
</file>

<file path=".claude/rules/03-operations/ci-cd/security-scan.md">
# Security Scan Standards

Guidelines for automated security vulnerability scanning.

## Rules
- Perform Static Application Security Testing (SAST) on every PR.
- Scan dependencies for known vulnerabilities (e.g., Snyk, GitHub Dependency Check).
- Perform Secret Scanning to prevent accidental exposure of API keys and credentials.
- Container images must be scanned for OS and library vulnerabilities before deployment.
- High and Critical vulnerabilities must block the build and deployment.
- Regularly update scanning tools and vulnerability databases.
- Document and justify any security findings that are marked as "won't fix" or "false positive".
</file>

<file path=".claude/rules/03-operations/ci-cd/versioning.md">
# Versioning Standards

Guidelines for versioning software and artifacts.

## Rules
- Follow Semantic Versioning (SemVer) 2.0.0: `MAJOR.MINOR.PATCH`.
- Increment `MAJOR` for incompatible API changes.
- Increment `MINOR` for added functionality in a backwards-compatible manner.
- Increment `PATCH` for backwards-compatible bug fixes.
- Use pre-release tags (e.g., `-alpha`, `-beta`, `-rc`) for testing versions.
- All artifacts (Docker images, packages) must be tagged with the version and git commit hash.
- Never reuse a version number once it has been released to production.
</file>

<file path=".claude/rules/03-operations/deployment/blue-green.md">
# Blue-Green Deployment Standards

Guidelines for zero-downtime blue-green deployment strategy.

## Rules
- Maintain two identical production environments: "Blue" (current) and "Green" (new).
- Deploy the new version to the idle environment (Green) and perform final validation.
- Switch traffic from Blue to Green at the load balancer level once Green is verified.
- Keep the Blue environment active for a short period after the switch to allow for near-instant rollback.
- Ensure database schema changes are backwards-compatible to support both environments during the transition.
- Automate the environment provisioning and traffic switching process.
- Regularly rotate which environment is "active" to ensure parity and prevent drift.
</file>

<file path=".claude/rules/03-operations/deployment/canary.md">
# Canary Deployment Standards

Guidelines for phased canary deployment strategy.

## Rules
- Deploy the new version to a small subset of servers or users (the "canaries") first.
- Monitor canary performance and error rates against the baseline (production) version.
- Automatically roll back if canary metrics exceed pre-defined error thresholds.
- Gradually increase the traffic percentage to the new version if metrics remain healthy.
- Use load balancer weights or header-based routing to control canary traffic.
- Canary deployments are preferred for high-traffic services where risk mitigation is critical.
- Ensure logging and monitoring can distinguish between canary and baseline traffic.
</file>

<file path=".claude/rules/03-operations/deployment/db-migrations.md">
# Database Migration Standards

Guidelines for managing database schema changes.

## Rules
- All database changes must be managed via migration scripts (e.g., Alembic, Flyway, Knex).
- Migrations must be version-controlled and applied sequentially.
- Schema changes must be backwards-compatible (additive) to support zero-downtime deployments.
- Never delete or rename columns in a single step; use a multi-phase approach (Add -> Migrate Data -> Deprecate -> Remove).
- Test migrations against a production-sized data set in staging to verify performance and timing.
- Always perform a database backup before applying migrations in production.
- Include a "down" or "rollback" script for every migration when feasible.
</file>

<file path=".claude/rules/03-operations/deployment/deploy-prod.md">
# Production Deployment Standards

Guidelines for deploying to the production environment.

## Rules
- All production deployments require a successful staging run and manual approval.
- Deployments must be performed during designated maintenance windows or use zero-downtime strategies.
- Ensure a rollback plan is verified and ready before initiating deployment.
- Production deployments must be tagged in version control and logged in the changelog.
- Monitor system health (error rates, latency, resource usage) intensely for at least 30 minutes post-deployment.
- Use a "lock" mechanism to prevent concurrent deployments to production.
- Only artifacts that have passed all CI checks and staging validation can be deployed to production.
</file>

<file path=".claude/rules/03-operations/deployment/deploy-staging.md">
# Staging Deployment Standards

Guidelines for deploying to the staging environment.

## Rules
- The staging environment must be a near-identical mirror of production.
- All deployments to staging must be automated via the CI/CD pipeline.
- Staging must use isolated data sources; never connect staging to production databases.
- Perform automated smoke tests immediately after deployment to verify core functionality.
- Staging is the final gate for manual QA and stakeholder review before production.
- Use feature flags to control the visibility of new features in staging.
- Automatically tear down or reset staging environments for ephemeral or PR-based previews.
</file>

<file path=".claude/rules/03-operations/deployment/infrastructure-code.md">
# Infrastructure as Code (IaC) Standards

Guidelines for managing infrastructure using code.

## Rules
- All infrastructure (servers, databases, networks) must be defined in code (e.g., Terraform, CloudFormation, CDK).
- IaC files must be version-controlled in the same repository as the application or a dedicated infra repo.
- Use modular IaC to promote reuse and maintainability.
- Perform a "plan" or "dry run" and require approval before applying changes to production infrastructure.
- Avoid manual changes ("click-ops") in the cloud console; all changes must go through code.
- Tag all resources with consistent metadata (environment, project, owner).
- Regularly run infrastructure audits to detect configuration drift.
</file>

<file path=".claude/rules/03-operations/deployment/rollback.md">
# Rollback Standards

Guidelines for reverting to a previous stable state in case of deployment failure.

## Rules
- Every deployment must have an automated or documented one-click rollback procedure.
- Trigger a rollback immediately if post-deployment health checks fail or critical errors are detected.
- Rollbacks must revert all components, including application code, configuration, and, if possible, database state.
- Post-rollback, perform a root cause analysis (RCA) to prevent the issue from recurring.
- Maintain at least the last three stable versions of artifacts for immediate rollback capability.
- Test the rollback procedure periodically in the staging environment.
- Notify all stakeholders immediately when a rollback is initiated.
</file>

<file path=".claude/rules/03-operations/deployment/secrets-management.md">
# Secrets Management Standards

Guidelines for handling sensitive configuration and credentials.

## Rules
- Never store secrets (passwords, API keys, certificates) in version control.
- Use a dedicated secret management service (e.g., AWS Secrets Manager, HashiCorp Vault, Doppler).
- Inject secrets into the application environment at runtime using secure methods.
- Implement secret rotation policies for all sensitive credentials.
- Audit access to secrets and limit permissions based on the principle of least privilege.
- Use environment-specific secrets (dev secrets for dev, prod secrets for prod).
- Encrypt secrets at rest and in transit.
</file>

<file path=".claude/rules/03-operations/monitoring/alerting.md">
# Alerting Standards

Guidelines for effective incident notification.

## Rules
- Alerts must be actionable; if no action is required, it should be a notification or a log.
- Define clear escalation paths for different alert severities.
- Minimize alert fatigue by tuning thresholds and grouping related alerts.
- Every alert should link to a relevant dashboard and runbook for resolution.
- Use multiple notification channels (e.g., Slack, PagerDuty, Email) based on urgency.
- Conduct "on-call" rotations and ensure responders have the necessary access and knowledge.
- Review alert frequency and accuracy monthly to reduce false positives.
</file>

<file path=".claude/rules/03-operations/monitoring/audit-logs.md">
# Audit Log Standards

Guidelines for recording system and user activity for security and compliance.

## Rules
- Record all administrative actions (user management, config changes, deployments).
- Include the "Who, What, When, Where, and Why" in every audit event.
- Audit logs must be immutable and stored in a secure, tamper-evident location.
- Implement log integrity checks to detect unauthorized modifications.
- Ensure audit logs are retained according to regulatory and business requirements.
- Periodically review audit logs for suspicious activity.
- Automate alerts for critical security-related audit events (e.g., multiple failed logins, permission changes).
</file>

<file path=".claude/rules/03-operations/monitoring/error-tracking.md">
# Error Tracking Standards

Guidelines for identifying and managing application errors.

## Rules
- Use an automated error tracking tool (e.g., Sentry, Rollbar).
- Group similar errors automatically to reduce noise and identify recurring issues.
- Configure alerts for new or high-frequency errors.
- Ensure error reports include stack traces, breadcrumbs, and environment metadata.
- Assign ownership to errors and track them until resolution.
- Monitor "error budgets" to balance feature velocity with system stability.
- Regularly review top errors and prioritize fixes based on user impact.
</file>

<file path=".claude/rules/03-operations/monitoring/logging.md">
# Logging Standards

Guidelines for application logging and observability.

## Rules
- Use structured logging (JSON) to facilitate automated parsing and analysis.
- Include correlation IDs in all logs to track requests across distributed services.
- Categorize logs by severity level: DEBUG, INFO, WARNING, ERROR, CRITICAL.
- Never log sensitive information (PII, passwords, secrets).
- Ensure logs include relevant context (user ID, request path, timestamp, environment).
- Centralize logs in a searchable platform (e.g., ELK stack, Datadog, CloudWatch).
- Implement log retention and rotation policies to manage storage costs.
</file>

<file path=".claude/rules/03-operations/monitoring/performance-metrics.md">
# Performance Metrics Standards

Guidelines for monitoring system performance.

## Rules
- Track the "Four Golden Signals": Latency, Traffic, Errors, and Saturation.
- Use percentiles (P50, P95, P99) instead of averages for latency monitoring.
- Set performance baselines for all critical API endpoints and user journeys.
- Monitor database query performance and identify slow queries.
- Use Distributed Tracing to identify bottlenecks in microservices architectures.
- Visualize metrics in real-time dashboards for operational visibility.
- Review performance trends weekly to identify gradual degradation.
</file>

<file path=".claude/rules/03-operations/monitoring/resource-usage.md">
# Resource Usage Standards

Guidelines for monitoring and optimizing hardware and cloud resource consumption.

## Rules
- Track CPU, Memory, Disk, and Network usage for all services.
- Set alerts for resource saturation (e.g., disk usage > 80%).
- Monitor cloud costs and identify underutilized or oversized resources.
- Use auto-scaling to match resource provision with actual demand.
- Implement resource limits and quotas (e.g., Docker/K8s limits) to prevent "noisy neighbor" issues.
- Profile application memory usage to detect and fix leaks.
- Regularly review and optimize resource allocation to balance performance and cost.
</file>

<file path=".claude/rules/03-operations/monitoring/uptime-monitoring.md">
# Uptime Monitoring Standards

Guidelines for ensuring high availability and uptime.

## Rules
- Implement external "heartbeat" or "synthetic" monitoring to check service availability.
- Monitor from multiple geographic locations to detect regional issues.
- Set up status pages to communicate uptime and incident status to users.
- Configure alerts for service downtime or significant degradation in availability.
- Define and monitor Service Level Objectives (SLOs) for uptime (e.g., 99.9%).
- Perform regular failover and disaster recovery drills.
- Analyze the root cause of every downtime incident.
</file>

<file path=".claude/rules/binh-phap-strategy.md">
---
title: "Binh PhÃ¡p Strategy Rule"
priority: P0
tags: [strategy, business, win-win-win]
agents: [binh-phap-strategist, revenue-engine, client-magnet, fullstack-developer]
---

# Binh PhÃ¡p Strategy Rule

> **"ThÆ°á»£ng binh pháº¡t mÆ°u"** - The supreme art of war is to subdue the enemy without fighting.

## WIN-WIN-WIN Validation (MANDATORY)

Before EVERY business decision, strategic recommendation, or deal evaluation, you MUST validate:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘‘ ANH (Owner) WIN gÃ¬?                           â”‚
â”‚  ğŸ¢ AGENCY WIN gÃ¬?                                â”‚
â”‚  ğŸš€ STARTUP/CLIENT WIN gÃ¬?                        â”‚
â”‚                                                   â”‚
â”‚  âŒ Náº¿u báº¥t ká»³ bÃªn nÃ o LOSE â†’ Dá»ªNG Láº I           â”‚
â”‚  âœ… Cáº£ 3 WIN â†’ Tiáº¿n hÃ nh                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## NgÅ© Sá»± (5 Factors) Analysis

Apply to ALL strategic decisions:

| Factor | Question | Green Flag | Red Flag |
|--------|----------|------------|----------|
| **Äáº¡o** | Interests aligned? | All parties benefit | One-sided gain |
| **ThiÃªn** | Timing right? | Market ready | Too early/late |
| **Äá»‹a** | Position strong? | Clear advantage | Weak moat |
| **TÆ°á»›ng** | Leadership clear? | Strong founder | Unclear roles |
| **PhÃ¡p** | Process standard? | Documented | Ad-hoc |

## Anti-Dilution Shield (Term Sheet Review)

When reviewing funding terms:

| Term | Acceptable | Walk Away |
|------|------------|-----------|
| Liquidation Preference | 1x non-participating | 2x+ or participating |
| Anti-dilution | Broad-based weighted | Full ratchet |
| Board Composition | Founder majority | Investor majority |
| Vesting | Standard 4-year cliff | Accelerated reset |

## Agent Delegation

- Use `binh-phap-strategist` for strategic analysis
- Use `revenue-engine` for financial validation
- Use `client-magnet` for relationship assessment

## Daily Check

```
â–¡ Today, did Anh WIN?
â–¡ Today, did Agency WIN?
â–¡ Today, did Startup WIN?
â–¡ No party LOST?
â–¡ Binh PhÃ¡p applied?
```

---

ğŸ¯ **"BÃ¡ch chiáº¿n bÃ¡ch tháº¯ng, phi thiá»‡n chi thiá»‡n giáº£ dÃ£"** - A hundred victories is not the height of skill.
</file>

<file path=".claude/rules/development-rules.md">
---
title: "Development Rules - VIBE Standard"
priority: P1
tags: [development, coding-standards, vibe]
agents: [*]
---

# âš–ï¸ Development Rules - VIBE Standard

**"QuÃ¢n phÃ¡p báº¥t vá»‹ thÃ¢n"** - Ká»· luáº­t lÃ  sá»©c máº¡nh cá»§a Ä‘á»™i quÃ¢n AI.

## 1. NguyÃªn Táº¯c Cá»‘t LÃµi (The Trinity)
1.  **YAGNI (You Aren't Gonna Need It):** KhÃ´ng code thá»«a. Náº¿u chÆ°a cáº§n dÃ¹ng ngay, Ä‘á»«ng viáº¿t.
2.  **KISS (Keep It Simple, Stupid):** ÄÆ¡n giáº£n nháº¥t cÃ³ thá»ƒ. Code dá»… Ä‘á»c > Code thÃ´ng minh.
3.  **DRY (Don't Repeat Yourself):** KhÃ´ng láº·p láº¡i. TÃ¡ch hÃ m, tÃ¡ch module.

## 2. Quy TrÃ¬nh VIBE (VIBE Workflow)
Má»i thay Ä‘á»•i code Ä‘á»u pháº£i tuÃ¢n thá»§ quy trÃ¬nh 6 bÆ°á»›c:
1.  **Detection:** XÃ¡c Ä‘á»‹nh `plan.md`.
2.  **Analysis:** PhÃ¢n tÃ­ch task.
3.  **Implementation:** Viáº¿t code.
4.  **Testing:** Cháº¡y `pytest` hoáº·c `npm test`. **Báº®T BUá»˜C 100% PASS.**
5.  **Review:** Tá»± Ä‘Ã¡nh giÃ¡ hoáº·c dÃ¹ng `code-reviewer`.
6.  **Finalize:** Commit vÃ  update docs.

## 3. Quáº£n LÃ½ File & Folder
- **Naming:** `kebab-case` (vÃ­ dá»¥: `revenue-engine.py`, `client-magnet.ts`).
- **Limit:** Tá»‘i Ä‘a **250 dÃ²ng/file**. Náº¿u dÃ i hÆ¡n -> Refactor ngay láº­p tá»©c.
- **Plans:** Má»i káº¿ hoáº¡ch pháº£i náº±m trong `plans/{date}-{slug}/`.

## 4. Báº£o Máº­t & An ToÃ n (Security First)
- **Secrets:** KHÃ”NG BAO GIá»œ commit `.env`, API Keys, Password.
- **Privacy Hook:** TÃ´n trá»ng `privacy-block.cjs`. Náº¿u bá»‹ cháº·n, hÃ£y há»i ngÆ°á»i dÃ¹ng.
- **Data:** KhÃ´ng dÃ¹ng dá»¯ liá»‡u tháº­t cá»§a khÃ¡ch hÃ ng Ä‘á»ƒ test. DÃ¹ng Mock Data.

## 5. Cam Káº¿t (Commit Standards)
Sá»­ dá»¥ng Conventional Commits:
- `feat(scope): ...` - TÃ­nh nÄƒng má»›i.
- `fix(scope): ...` - Sá»­a lá»—i.
- `refactor(scope): ...` - Tá»‘i Æ°u code.
- `docs(scope): ...` - Cáº­p nháº­t tÃ i liá»‡u.

**Tuyá»‡t Ä‘á»‘i khÃ´ng:** Commit code bá»‹ lá»—i hoáº·c chÆ°a qua test.

> ğŸ¯ **"Tháº¯ng tá»« trong chuáº©n bá»‹"** - Code sáº¡ch lÃ  code chiáº¿n tháº¯ng.
</file>

<file path=".claude/rules/documentation-management.md">
---
title: "Project Documentation Management"
priority: P2
tags: [documentation, management, roadmap]
agents: [project-manager, docs-manager]
---

# Project Documentation Management

### Roadmap & Changelog Maintenance
- **Project Roadmap** (`./docs/development-roadmap.md`): Living document tracking project phases, milestones, and progress
- **Project Changelog** (`./docs/project-changelog.md`): Detailed record of all significant changes, features, and fixes
- **System Architecture** (`./docs/system-architecture.md`): Detailed record of all significant changes, features, and fixes
- **Code Standards** (`./docs/code-standards.md`): Detailed record of all significant changes, features, and fixes

### Automatic Updates Required
- **After Feature Implementation**: Update roadmap progress status and changelog entries
- **After Major Milestones**: Review and adjust roadmap phases, update success metrics
- **After Bug Fixes**: Document fixes in changelog with severity and impact
- **After Security Updates**: Record security improvements and version updates
- **Weekly Reviews**: Update progress percentages and milestone statuses

### Documentation Triggers
The `project-manager` agent MUST update these documents when:
- A development phase status changes (e.g., from "In Progress" to "Complete")
- Major features are implemented or released
- Significant bugs are resolved or security patches applied
- Project timeline or scope adjustments are made
- External dependencies or breaking changes occur

### Update Protocol
1. **Before Updates**: Always read current roadmap and changelog status
2. **During Updates**: Maintain version consistency and proper formatting
3. **After Updates**: Verify links, dates, and cross-references are accurate
4. **Quality Check**: Ensure updates align with actual implementation progress

### Plans

### Plan Location
Save plans in `./plans` directory with timestamp and descriptive name.

**Format:** Use naming pattern from `## Naming` section injected by hooks.

**Example:** `plans/251101-1505-authentication-and-profile-implementation/`

#### File Organization

```
plans/
â”œâ”€â”€ 20251101-1505-authentication-and-profile-implementation/
    â”œâ”€â”€ research/
    â”‚   â”œâ”€â”€ researcher-XX-report.md
    â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ reports/
â”‚   â”‚   â”œâ”€â”€ scout-report.md
â”‚   â”‚   â”œâ”€â”€ researcher-report.md
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ plan.md                                # Overview access point
â”‚   â”œâ”€â”€ phase-01-setup-environment.md          # Setup environment
â”‚   â”œâ”€â”€ phase-02-implement-database.md         # Database models
â”‚   â”œâ”€â”€ phase-03-implement-api-endpoints.md    # API endpoints
â”‚   â”œâ”€â”€ phase-04-implement-ui-components.md    # UI components
â”‚   â”œâ”€â”€ phase-05-implement-authentication.md   # Auth & authorization
â”‚   â”œâ”€â”€ phase-06-implement-profile.md          # Profile page
â”‚   â””â”€â”€ phase-07-write-tests.md                # Tests
â””â”€â”€ ...
```

#### File Structure

##### Overview Plan (plan.md)
- Keep generic and under 80 lines
- List each phase with status/progress
- Link to detailed phase files
- Key dependencies

##### Phase Files (phase-XX-name.md)
Fully respect the `./docs/development-rules.md` file.
Each phase file should contain:

**Context Links**
- Links to related reports, files, documentation

**Overview**
- Priority
- Current status
- Brief description

**Key Insights**
- Important findings from research
- Critical considerations

**Requirements**
- Functional requirements
- Non-functional requirements

**Architecture**
- System design
- Component interactions
- Data flow

**Related Code Files**
- List of files to modify
- List of files to create
- List of files to delete

**Implementation Steps**
- Detailed, numbered steps
- Specific instructions

**Todo List**
- Checkbox list for tracking

**Success Criteria**
- Definition of done
- Validation methods

**Risk Assessment**
- Potential issues
- Mitigation strategies

**Security Considerations**
- Auth/authorization
- Data protection

**Next Steps**
- Dependencies
- Follow-up tasks
</file>

<file path=".claude/rules/m3-strict.md">
---
title: "Rule: MD3 Strict Mode"
priority: P2
tags: [ui, design, material-design-3]
agents: [ui-ux-designer, frontend-developer]
---

# ğŸ¨ Rule: MD3 Strict Mode

> **Reference:** https://m3.material.io/

All UI components MUST adhere to Material Design 3 guidelines.

## 1. Component Usage
*   âŒ `div className="card"`
*   âœ… `<MD3Card variant="elevated">`

*   âŒ `button className="btn-primary"`
*   âœ… `<MD3Button variant="filled">`

## 2. Design Tokens
*   âŒ `bg-white`, `text-black`
*   âœ… `bg-[var(--md-sys-color-surface)]`, `text-[var(--md-sys-color-on-surface)]`

*   âŒ `rounded-lg`
*   âœ… `rounded-[var(--md-sys-shape-corner-medium)]`

## 3. Typography
*   Use standard classes: `m3-display-large`, `m3-headline-large`, `m3-body-large`.

## 4. Icons
*   Use `lucide-react` but styled with `text-[var(--md-sys-color-primary)]`.
</file>

<file path=".claude/rules/primary-workflow.md">
---
title: "Primary Workflow"
priority: P1
tags: [workflow, process, orchestration]
agents: [*]
---

# Primary Workflow

**IMPORTANT:** Analyze the skills catalog and activate the skills that are needed for the task during the process.
**IMPORTANT**: Ensure token efficiency while maintaining high quality.

#### 1. Code Implementation
- Before you start, delegate to `planner` agent to create a implementation plan with TODO tasks in `./plans` directory.
- When in planning phase, use multiple `researcher` agents in parallel to conduct research on different relevant technical topics and report back to `planner` agent to create implementation plan.
- Write clean, readable, and maintainable code
- Follow established architectural patterns
- Implement features according to specifications
- Handle edge cases and error scenarios
- **DO NOT** create new enhanced files, update to the existing files directly.
- **[IMPORTANT]** After creating or modifying code file, run compile command/script to check for any compile errors.

#### 2. Testing
- Delegate to `tester` agent to run tests and analyze the summary report.
  - Write comprehensive unit tests
  - Ensure high code coverage
  - Test error scenarios
  - Validate performance requirements
- Tests are critical for ensuring code quality and reliability, **DO NOT** ignore failing tests just to pass the build.
- **IMPORTANT:** make sure you don't use fake data, mocks, cheats, tricks, temporary solutions, just to pass the build or github actions.
- **IMPORTANT:** Always fix failing tests follow the recommendations and delegate to `tester` agent to run tests again, only finish your session when all tests pass.

#### 3. Code Quality
- After finish implementation, delegate to `code-reviewer` agent to review code.
- Follow coding standards and conventions
- Write self-documenting code
- Add meaningful comments for complex logic
- Optimize for performance and maintainability

#### 4. Integration
- Always follow the plan given by `planner` agent
- Ensure seamless integration with existing code
- Follow API contracts precisely
- Maintain backward compatibility
- Document breaking changes
- Delegate to `docs-manager` agent to update docs in `./docs` directory if any.

#### 5. Debugging
- When a user report bugs or issues on the server or a CI/CD pipeline, delegate to `debugger` agent to run tests and analyze the summary report.
- Read the summary report from `debugger` agent and implement the fix.
- Delegate to `tester` agent to run tests and analyze the summary report.
- If the `tester` agent reports failed tests, fix them follow the recommendations and repeat from the **Step 2**.
</file>

<file path=".claude/rules/vibe-development-rules.md">
---
title: "VIBE Development Rules"
priority: P1
tags: [development, vibe, standards]
agents: [*]
---

# VIBE Development Rules

> **VIBE-specific rules extending ClaudeKit development standards**
> TiÃªu chuáº©n Antigravity IDE 2026

---

## Core Principles

**ALWAYS** honor:
- **YAGNI** - You Aren't Gonna Need It
- **KISS** - Keep It Simple, Stupid
- **DRY** - Don't Repeat Yourself
- **WIN-WIN-WIN** - All parties must benefit

---

## File Management

| Rule | Standard |
|------|----------|
| Naming | kebab-case with descriptive names |
| Max lines | 200 lines per file |
| Splitting | Extract utilities into separate modules |
| Comments | Vietnamese-first with English translations |

---

## 6-Step Workflow Compliance

Every implementation MUST follow:

1. **Plan Detection** â†’ Find/select plan
2. **Analysis** â†’ Extract tasks, map dependencies
3. **Implementation** â†’ Execute with YAGNI/KISS/DRY
4. **Testing** â†’ 100% pass gate
5. **Code Review** â†’ User approval blocking
6. **Finalize** â†’ Update docs, commit

---

## Blocking Gates

### Testing Gate
- ALL tests must pass
- No mocks for core business logic
- No fake data to pass tests
- No commented-out tests

### Code Review Gate
- User must explicitly approve
- Critical issues must be fixed
- Score should be â‰¥7/10

---

## Agent Delegation

### When to Delegate

| Task | Agent |
|------|-------|
| Planning | `planner` |
| Research | `researcher` |
| Testing | `tester` |
| Debugging | `debugger` |
| Code review | `code-reviewer` |
| Documentation | `docs-manager` |
| UI work | `ui-ux-designer` |

### Orchestration Patterns

**Sequential** (for dependent tasks):
```
Planning â†’ Implementation â†’ Testing â†’ Review
```

**Parallel** (for independent tasks):
```
Code + Tests + Docs (non-conflicting components)
```

---

## Binh PhÃ¡p Integration

Before major decisions, validate:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘‘ ANH (Owner) WIN gÃ¬?                           â”‚
â”‚  ğŸ¢ AGENCY WIN gÃ¬?                                â”‚
â”‚  ğŸš€ STARTUP/CLIENT WIN gÃ¬?                        â”‚
â”‚                                                   â”‚
â”‚  âŒ If any party LOSES â†’ STOP                    â”‚
â”‚  âœ… All 3 WIN â†’ PROCEED                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Commit Standards

Format: `<type>(<scope>): <description>`

Types: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`

**NEVER commit:**
- API keys
- Credentials
- .env files
- Private data

---

## Documentation

Update docs after every implementation:
- `/docs` directory for project docs
- `README.md` for getting started
- Inline comments for complex logic

---

ğŸ¯ **"LÃ m Ä‘Ãºng tá»« Ä‘áº§u, Ä‘á»¡ sá»­a vá» sau"**
*Do it right from the start, save fixing later*
</file>

</files>
