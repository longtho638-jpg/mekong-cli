============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-7.4.4, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
rootdir: /Users/macbookprom1/mekong-cli/backend
configfile: pytest.ini
plugins: anyio-4.11.0, asyncio-0.23.3, respx-0.20.2, langsmith-0.4.37, cov-7.0.0
asyncio: mode=auto
collecting ... collected 21 items

backend/api/routers/test_team.py::TestTeamCreation::test_create_team_success FAILED [  4%]
backend/api/routers/test_team.py::TestTeamCreation::test_create_team_invalid_tier FAILED [  9%]
backend/api/routers/test_team.py::TestTeamCreation::test_create_team_enterprise_unlimited_seats FAILED [ 14%]
backend/api/routers/test_team.py::TestMemberInvitation::test_invite_member_success ERROR [ 19%]
backend/api/routers/test_team.py::TestMemberInvitation::test_invite_multiple_members ERROR [ 23%]
backend/api/routers/test_team.py::TestMemberInvitation::test_invite_exceeds_seat_limit ERROR [ 28%]
backend/api/routers/test_team.py::TestMemberInvitation::test_invite_duplicate_member ERROR [ 33%]
backend/api/routers/test_team.py::TestMemberInvitation::test_invite_team_not_found ERROR [ 38%]
backend/api/routers/test_team.py::TestMemberRemoval::test_remove_member_success ERROR [ 42%]
backend/api/routers/test_team.py::TestMemberRemoval::test_remove_owner_fails ERROR [ 47%]
backend/api/routers/test_team.py::TestMemberRemoval::test_remove_nonexistent_member ERROR [ 52%]
backend/api/routers/test_team.py::TestMemberRemoval::test_remove_already_removed_member ERROR [ 57%]
backend/api/routers/test_team.py::TestMemberListing::test_list_members_success ERROR [ 61%]
backend/api/routers/test_team.py::TestMemberListing::test_list_members_exclude_removed ERROR [ 66%]
backend/api/routers/test_team.py::TestMemberListing::test_list_members_include_removed ERROR [ 71%]
backend/api/routers/test_team.py::TestMemberListing::test_list_members_team_not_found ERROR [ 76%]
backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_success ERROR [ 80%]
backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_after_invites ERROR [ 85%]
backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_enterprise_unlimited ERROR [ 90%]
backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_team_not_found ERROR [ 95%]
backend/api/routers/test_team.py::TestHealthCheck::test_health_check FAILED [100%]

==================================== ERRORS ====================================
______ ERROR at setup of TestMemberInvitation.test_invite_member_success _______
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 74, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:74: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
_____ ERROR at setup of TestMemberInvitation.test_invite_multiple_members ______
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 74, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:74: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
____ ERROR at setup of TestMemberInvitation.test_invite_exceeds_seat_limit _____
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 74, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:74: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
_____ ERROR at setup of TestMemberInvitation.test_invite_duplicate_member ______
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 74, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:74: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
______ ERROR at setup of TestMemberInvitation.test_invite_team_not_found _______
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 74, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:74: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
________ ERROR at setup of TestMemberRemoval.test_remove_member_success ________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 165, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:165: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
_________ ERROR at setup of TestMemberRemoval.test_remove_owner_fails __________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 165, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:165: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
______ ERROR at setup of TestMemberRemoval.test_remove_nonexistent_member ______
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 165, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:165: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
____ ERROR at setup of TestMemberRemoval.test_remove_already_removed_member ____
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 165, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:165: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
________ ERROR at setup of TestMemberListing.test_list_members_success _________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 218, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:218: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
____ ERROR at setup of TestMemberListing.test_list_members_exclude_removed _____
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 218, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:218: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
____ ERROR at setup of TestMemberListing.test_list_members_include_removed _____
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 218, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:218: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
_____ ERROR at setup of TestMemberListing.test_list_members_team_not_found _____
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 218, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:218: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
_______ ERROR at setup of TestSeatAvailability.test_check_seats_success ________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 276, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:276: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
____ ERROR at setup of TestSeatAvailability.test_check_seats_after_invites _____
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 276, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:276: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
_ ERROR at setup of TestSeatAvailability.test_check_seats_enterprise_unlimited _
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 276, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:276: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
____ ERROR at setup of TestSeatAvailability.test_check_seats_team_not_found ____
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 157, in pytest_runtest_setup
    |     item.session._setupstate.setup(item)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 497, in setup
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 494, in setup
    |     col.setup()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1795, in setup
    |     self._request._fillfixtures()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 566, in _fillfixtures
    |     item.funcargs[argname] = self.getfixturevalue(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 585, in getfixturevalue
    |     fixturedef = self._get_active_fixturedef(argname)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 607, in _get_active_fixturedef
    |     self._compute_fixture_value(fixturedef)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 693, in _compute_fixture_value
    |     fixturedef.execute(request=subrequest)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1069, in execute
    |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 1123, in pytest_fixture_setup
    |     result = call_fixture_func(fixturefunc, request, kwargs)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/fixtures.py", line 895, in call_fixture_func
    |     fixture_result = next(generator)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 899, in xunit_setup_method_fixture
    |     _call_with_optional_argument(func, method)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 779, in _call_with_optional_argument
    |     func()
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 276, in setup_method
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:276: in setup_method
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
=================================== FAILURES ===================================
__________________ TestTeamCreation.test_create_team_success ___________________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    |     raise e
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    |     item.runtest()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1792, in runtest
    |     self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    |     result = testfunction(**testargs)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 20, in test_create_team_success
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:20: in test_create_team_success
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
________________ TestTeamCreation.test_create_team_invalid_tier ________________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    |     raise e
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    |     item.runtest()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1792, in runtest
    |     self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    |     result = testfunction(**testargs)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 42, in test_create_team_invalid_tier
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:42: in test_create_team_invalid_tier
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
_________ TestTeamCreation.test_create_team_enterprise_unlimited_seats _________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    |     raise e
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    |     item.runtest()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1792, in runtest
    |     self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    |     result = testfunction(**testargs)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 55, in test_create_team_enterprise_unlimited_seats
    |     response = client.post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 593, in post
    |     return super().post(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1157, in post
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:55: in test_create_team_enterprise_unlimited_seats
    response = client.post(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:593: in post
    return super().post(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1157: in post
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
______________________ TestHealthCheck.test_health_check _______________________
  + Exception Group Traceback (most recent call last):
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
  |     yield
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
  |     response_sent.set()
  |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | exceptiongroup.ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 341, in from_call
    |     result: Optional[TResult] = func()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 262, in <lambda>
    |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    |     raise e
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    |     item.runtest()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 1792, in runtest
    |     self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_hooks.py", line 512, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 167, in _multicall
    |     raise exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 139, in _multicall
    |     teardown.throw(exception)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    |     return result.get_result()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_result.py", line 103, in get_result
    |     raise exc.with_traceback(tb)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    |     res = yield
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pluggy/_callers.py", line 121, in _multicall
    |     res = hook_impl.function(*args)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    |     result = testfunction(**testargs)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/routers/test_team.py", line 341, in test_health_check
    |     response = client.get("/api/team/health")
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 502, in get
    |     return super().get(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1066, in get
    |     return self.request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 468, in request
    |     return super().request(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 837, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 926, in send
    |     response = self._send_handling_auth(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 954, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py", line 1027, in _send_single_request
    |     response = transport.handle_request(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 344, in handle_request
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/testclient.py", line 341, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 445, in result
    |     return self.__get_result()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py", line 390, in __get_result
    |     raise self._exception
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/applications.py", line 123, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/api/middleware/metrics_logic/__init__.py", line 16, in metrics_middleware
    |     response = await call_next(request)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 165, in call_next
    |     raise app_exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 193, in __call__
    |     response_sent.set()
    |   File "/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py", line 135, in __exit__
    |     self.gen.throw(type, value, traceback)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/_utils.py", line 91, in collapse_excgroups
    |     raise exc
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |   File "/Users/macbookprom1/mekong-cli/backend/middleware/rate_limiter.py", line 68, in dispatch
    |     if await ip_blocker.is_blocked(client_ip):
    |   File "/Users/macbookprom1/mekong-cli/backend/services/ip_blocker.py", line 33, in is_blocked
    |     blocked = await self.redis.get(key)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py", line 601, in execute_command
    |     conn = self.connection or await pool.get_connection(command_name, **options)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1040, in get_connection
    |     await self.ensure_connection(connection)
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 1062, in ensure_connection
    |     await connection.connect()
    |   File "/Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py", line 251, in connect
    |     raise ConnectionError(self._error_message(e))
    | redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
    +------------------------------------

During handling of the above exception, another exception occurred:
backend/api/routers/test_team.py:341: in test_health_check
    response = client.get("/api/team/health")
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:502: in get
    return super().get(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1066: in get
    return self.request(
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:468: in request
    return super().request(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:837: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:926: in send
    response = self._send_handling_auth(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:954: in _send_handling_auth
    response = self._send_handling_redirects(
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:991: in _send_handling_redirects
    response = self._send_single_request(request)
../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:1027: in _send_single_request
    response = transport.handle_request(request)
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:344: in handle_request
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/testclient.py:341: in handle_request
    portal.call(self.app, scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:445: in result
    return self.__get_result()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/concurrent/futures/_base.py:390: in __get_result
    raise self._exception
../Library/Python/3.9/lib/python/site-packages/anyio/from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:1054: in __call__
    await super().__call__(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/applications.py:123: in __call__
    await self.middleware_stack(scope, receive, send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:186: in __call__
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/errors.py:164: in __call__
    await self.app(scope, receive, _send)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/api/middleware/metrics_logic/__init__.py:16: in metrics_middleware
    response = await call_next(request)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:165: in call_next
    raise app_exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:151: in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:193: in __call__
    response_sent.set()
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/contextlib.py:135: in __exit__
    self.gen.throw(type, value, traceback)
../Library/Python/3.9/lib/python/site-packages/starlette/_utils.py:91: in collapse_excgroups
    raise exc
../Library/Python/3.9/lib/python/site-packages/starlette/middleware/base.py:191: in __call__
    response = await self.dispatch_func(request, call_next)
backend/middleware/rate_limiter.py:68: in dispatch
    if await ip_blocker.is_blocked(client_ip):
backend/services/ip_blocker.py:33: in is_blocked
    blocked = await self.redis.get(key)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/client.py:601: in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1040: in get_connection
    await self.ensure_connection(connection)
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:1062: in ensure_connection
    await connection.connect()
../Library/Python/3.9/lib/python/site-packages/redis/asyncio/connection.py:251: in connect
    raise ConnectionError(self._error_message(e))
E   redis.exceptions.ConnectionError: Error connecting to localhost:6379. Multiple exceptions: [Errno 61] Connect call failed ('::1', 6379, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 6379).
=============================== warnings summary ===============================
../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:366
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:366: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def construct_refs(cls, data: TableMetadataV1) -> TableMetadataV1:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:495
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:495: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def check_schemas(cls, table_metadata: TableMetadata) -> TableMetadata:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:499
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:499: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def check_partition_specs(cls, table_metadata: TableMetadata) -> TableMetadata:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:503
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:503: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def check_sort_orders(cls, table_metadata: TableMetadata) -> TableMetadata:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:507
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:507: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def construct_refs(cls, table_metadata: TableMetadata) -> TableMetadata:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:539
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:539: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def check_schemas(cls, table_metadata: TableMetadata) -> TableMetadata:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:543
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:543: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def check_partition_specs(cls, table_metadata: TableMetadata) -> TableMetadata:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:547
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:547: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def check_sort_orders(cls, table_metadata: TableMetadata) -> TableMetadata:

../Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:551
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/pyiceberg/table/metadata.py:551: PydanticDeprecatedSince212: Using `@model_validator` with mode='after' on a classmethod is deprecated. Instead, use an instance method. See the documentation at https://docs.pydantic.dev/2.12/concepts/validators/#model-after-validator. Deprecated in Pydantic V2.12 to be removed in V3.0.
    def construct_refs(cls, table_metadata: TableMetadata) -> TableMetadata:

core/licensing/__init__.py:4
  /Users/macbookprom1/mekong-cli/core/licensing/__init__.py:4: DeprecationWarning: core.licensing.generator is deprecated. Use core.licensing.logic instead.
    from .generator import LicenseGenerator, generate_license_key, license_generator

core/licensing/__init__.py:5
  /Users/macbookprom1/mekong-cli/core/licensing/__init__.py:5: DeprecationWarning: core.licensing.validator is deprecated. Use core.licensing.validation instead.
    from .validator import LicenseTier, LicenseValidator

backend/api/schemas/audit.py:7
  /Users/macbookprom1/mekong-cli/backend/api/schemas/audit.py:7: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AuditLogSchema(BaseModel):

backend/api/routers/audit.py:43
backend/api/routers/audit.py:43
  /Users/macbookprom1/mekong-cli/backend/api/routers/audit.py:43: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("json", regex="^(json|csv)$"),

backend/api/schemas/prompt.py:23
  /Users/macbookprom1/mekong-cli/backend/api/schemas/prompt.py:23: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PromptResponse(PromptBase):

backend/api/routers/notification_templates.py:29
backend/api/routers/notification_templates.py:29
  /Users/macbookprom1/mekong-cli/backend/api/routers/notification_templates.py:29: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TemplateResponse(BaseModel):

backend/api/routers/notifications.py:14
backend/api/routers/notifications.py:14
  /Users/macbookprom1/mekong-cli/backend/api/routers/notifications.py:14: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class NotificationResponse(BaseModel):

backend/api/utils/__init__.py:14
  /Users/macbookprom1/mekong-cli/backend/api/utils/__init__.py:14: DeprecationWarning: backend.api.utils.validators is deprecated. Use backend.api.utils.validation_logic instead.
    from .validators import (

backend/api/main.py:20
  /Users/macbookprom1/mekong-cli/backend/api/main.py:20: DeprecationWarning: backend.api.middleware.metrics is deprecated. Use backend.api.middleware.metrics_logic instead.
    from backend.api.middleware.metrics import setup_metrics

backend/api/main.py:23
  /Users/macbookprom1/mekong-cli/backend/api/main.py:23: DeprecationWarning: backend.api.middleware.multitenant is deprecated. Use backend.api.middleware.multitenant_logic instead.
    from backend.api.middleware.multitenant import MultiTenantMiddleware, setup_tenant_routes

backend/api/services/admin_service.py:13
  /Users/macbookprom1/mekong-cli/backend/api/services/admin_service.py:13: DeprecationWarning: The `gotrue` package is deprecated, is not going to receive updates in the future. Please, use `supabase_auth` instead.
    from gotrue.errors import AuthApiError

backend/models/dashboard.py:32
  /Users/macbookprom1/mekong-cli/backend/models/dashboard.py:32: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DashboardWidget(DashboardWidgetBase):

backend/models/dashboard.py:58
  /Users/macbookprom1/mekong-cli/backend/models/dashboard.py:58: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DashboardConfig(DashboardConfigBase):

backend/api/routers/dashboard.py:96
  /Users/macbookprom1/mekong-cli/backend/api/routers/dashboard.py:96: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    date_range: str = Query("30d", regex="^(today|7d|30d|90d|ytd|custom)$"),

backend/api/main.py:239
  /Users/macbookprom1/mekong-cli/backend/api/main.py:239: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("startup")

../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:4495
../Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:4495
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/fastapi/applications.py:4495: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    return self.router.on_event(event_type)

backend/api/main.py:249
  /Users/macbookprom1/mekong-cli/backend/api/main.py:249: DeprecationWarning: 
          on_event is deprecated, use lifespan event handlers instead.
  
          Read more about it in the
          [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
          
    @app.on_event("shutdown")

../Library/Python/3.9/lib/python/site-packages/httpx/_client.py:690
  /Users/macbookprom1/Library/Python/3.9/lib/python/site-packages/httpx/_client.py:690: DeprecationWarning: The 'app' shortcut is now deprecated. Use the explicit style 'transport=WSGITransport(app=...)' instead.
    warnings.warn(message, DeprecationWarning)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED backend/api/routers/test_team.py::TestTeamCreation::test_create_team_success
FAILED backend/api/routers/test_team.py::TestTeamCreation::test_create_team_invalid_tier
FAILED backend/api/routers/test_team.py::TestTeamCreation::test_create_team_enterprise_unlimited_seats
FAILED backend/api/routers/test_team.py::TestHealthCheck::test_health_check
ERROR backend/api/routers/test_team.py::TestMemberInvitation::test_invite_member_success
ERROR backend/api/routers/test_team.py::TestMemberInvitation::test_invite_multiple_members
ERROR backend/api/routers/test_team.py::TestMemberInvitation::test_invite_exceeds_seat_limit
ERROR backend/api/routers/test_team.py::TestMemberInvitation::test_invite_duplicate_member
ERROR backend/api/routers/test_team.py::TestMemberInvitation::test_invite_team_not_found
ERROR backend/api/routers/test_team.py::TestMemberRemoval::test_remove_member_success
ERROR backend/api/routers/test_team.py::TestMemberRemoval::test_remove_owner_fails
ERROR backend/api/routers/test_team.py::TestMemberRemoval::test_remove_nonexistent_member
ERROR backend/api/routers/test_team.py::TestMemberRemoval::test_remove_already_removed_member
ERROR backend/api/routers/test_team.py::TestMemberListing::test_list_members_success
ERROR backend/api/routers/test_team.py::TestMemberListing::test_list_members_exclude_removed
ERROR backend/api/routers/test_team.py::TestMemberListing::test_list_members_include_removed
ERROR backend/api/routers/test_team.py::TestMemberListing::test_list_members_team_not_found
ERROR backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_success
ERROR backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_after_invites
ERROR backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_enterprise_unlimited
ERROR backend/api/routers/test_team.py::TestSeatAvailability::test_check_seats_team_not_found
================== 4 failed, 31 warnings, 17 errors in 15.72s ==================
