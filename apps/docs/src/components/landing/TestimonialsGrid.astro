---
import { getLocaleFromUrl, useTranslations } from '@agencyos/i18n/astro';
import { locales } from '@agencyos/i18n/locales';

const locale = getLocaleFromUrl(Astro.url);
const t = useTranslations(locale);

interface TestimonialItem {
  quote: string;
  name: string;
  role: string;
}

const testimonials = (locales[locale] as any).landing.testimonials_grid;
const items = Object.values(testimonials.items) as TestimonialItem[];
---
<section class="py-16">
  <div class="mx-auto max-w-content px-4 sm:px-6 lg:px-8">
    <h2 class="text-3xl font-bold text-center mb-4 text-[var(--color-text-primary)]">
      {testimonials.title}
    </h2>
    <p class="text-center text-[var(--color-text-muted)] mb-12">{testimonials.subtitle}</p>

    <!-- Video Testimonial -->
    <div class="max-w-2xl mx-auto mb-12">
      <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 1rem; border: 2px solid var(--color-accent-green); background: var(--color-bg-tertiary);">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; padding: 2rem;">
          <div style="font-size: 4rem; margin-bottom: 1rem;">üé¨</div>
          <h3 style="margin: 0 0 0.5rem 0; font-size: 1.25rem; color: var(--color-text-primary);">{testimonials.video_title}</h3>
          <p style="margin: 0; color: var(--color-text-muted); font-size: 0.875rem;">{testimonials.video_subtitle}</p>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
      {items.map((item, index) => (
        <div class="p-6 rounded-xl bg-[var(--color-bg-secondary)] border border-[var(--color-border)] relative hover:border-[var(--color-accent-green)] transition-all">
          <div class="text-2xl mb-3">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          <p class="text-[var(--color-text-secondary)] mb-4 italic text-sm">
            "{item.quote}"
          </p>
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-full bg-gradient-to-r flex items-center justify-center text-white font-bold text-sm" style={`background-image: linear-gradient(to right, ${
              index === 0 ? 'var(--color-accent-green), var(--color-accent-cyan)' :
              index === 1 ? 'var(--color-accent-blue), var(--color-accent-purple)' :
              index === 2 ? 'var(--color-accent-purple), var(--color-accent-pink)' :
              index === 3 ? 'var(--color-accent-orange), var(--color-accent-red)' :
              index === 4 ? 'var(--color-accent-cyan), var(--color-accent-blue)' :
              'var(--color-accent-pink), var(--color-accent-purple)'
            })`}>
              {item.name.charAt(0)}
            </div>
            <div>
              <div class="font-semibold text-[var(--color-text-primary)] text-sm">{item.name}</div>
              <div class="text-xs text-[var(--color-text-muted)]">{item.role}</div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
